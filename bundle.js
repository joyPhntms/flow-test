/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={890:e=>{"use strict";e.exports=function(){try{return!!new Blob}catch(e){return!1}}()},995:(e,t,n)=>{"use strict";var o=n(7).EventEmitter;function r(){o.call(this),this.setMaxListeners(20)}r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype.off=function(e,t){return t?this.removeListener(e,t):e?this.removeAllListeners(e):this.removeAllListeners()},e.exports=r},794:(e,t,n)=>{"use strict";var o=n(995),r=n(170),i=0;e.exports=function e(t){var n,s={},a=[],c=[],u=0,l=0,h={},d=function(o){return Array.isArray(o)?(o.forEach(d),n):((i=o.assets&&Array.isArray(o.assets)?e(f(o,t)):r(f(o,t))).once("destroy",v),c.push(i),h[i.id]=i,n);var i},_=function(e){return arguments.length?s[e]?s[e]:h[e]:a},f=function(e,t){return"string"==typeof e&&(e={url:e}),void 0===e.isTouchLocked&&(e.isTouchLocked=t.isTouchLocked),void 0===e.blob&&(e.blob=t.blob),void 0===e.basePath&&(e.basePath=t.basePath),e.id=e.id||e.url||String(++i),e.type=e.type||(n=e.url)&&n.split("?")[0].split(".").pop().toLowerCase(),e.crossOrigin=e.crossOrigin||t.crossOrigin,e.webAudioContext=e.webAudioContext||t.webAudioContext,e.log=t.log,e;var n},p=function(e){var t=u+e;n.emit("progress",t/l)},m=function(e,t,o){Array.isArray(e)&&(e={id:t,file:e,type:o}),u++,n.emit("progress",u/l),s[e.id]=e.file,a.push(e),n.emit("childcomplete",e),g()},E=function(e){l--,n.listeners("error").length?n.emit("error",e):console.error(e),g()},v=function(e){h[e]=null,delete h[e],s[e]=null,delete s[e],a.some((function(t,n){if(t.id===e)return a.splice(n,1),!0}))},g=function(){u>=l&&n.emit("complete",a,s,t.id,"group")};return n=Object.create(o.prototype,{_events:{value:{}},id:{get:function(){return t.id}},add:{value:d},start:{value:function(){return l=c.length,c.forEach((function(e){e.on("progress",p).once("complete",m).once("error",E).start()})),c=[],n}},get:{value:_},find:{value:function(e){if(_(e))return _(e);var t=null;return Object.keys(h).some((function(n){return!!(t=h[n].find&&h[n].find(e))})),t}},getLoader:{value:function(e){return h[e]}},loaded:{get:function(){return u>=l}},file:{get:function(){return a}},destroy:{value:function(){for(;c.length;)c.pop().destroy();return n.off("error"),n.off("progress"),n.off("complete"),a=[],s={},t.webAudioContext=null,l=0,u=0,Object.keys(h).forEach((function(e){h[e].destroy()})),h={},n.emit("destroy",n.id),n}}}),t=f(t||{},{basePath:"",blob:!1,touchLocked:!1,crossOrigin:null,webAudioContext:null,log:!1}),Array.isArray(t.assets)&&d(t.assets),n}},757:(e,t,n)=>{"use strict";var o=n(794);o.stats=n(302),e.exports=o},170:(e,t,n)=>{"use strict";var o=n(995),r=n(890),i=n(302);e.exports=function(e){var t,n,s,a,c,u,l=e.id,h=e.basePath||"",d=e.url,_=e.type,f=e.crossOrigin,p=e.isTouchLocked,m=e.blob&&r,E=e.webAudioContext,v=e.log,g=function(e){e&&(u={id:l,file:e,type:_},t.emit("progress",1),t.emit("complete",u,l,_),N())},x=function(e,t){n=t||b,(s=new XMLHttpRequest).open("GET",h+d,!0),s.responseType=e,s.addEventListener("progress",T),s.addEventListener("load",n),s.addEventListener("error",L),s.send()},T=function(e){e.lengthComputable&&t.emit("progress",e.loaded/e.total)},b=function(){A()&&g(s.response)},A=function(){return s&&s.status<400?(i.update(s,a,d,v),!0):(L(s&&s.statusText),!1)},y=function(){s=new Image,f&&(s.crossOrigin="anonymous"),s.addEventListener("error",L,!1),s.addEventListener("load",R,!1),s.src=h+d},R=function(e){window.clearTimeout(c),e||!s.error&&s.readyState?g(s):L()},M=function(){x("blob",(function(){A()&&((s=new Image).addEventListener("error",L,!1),s.addEventListener("load",C,!1),s.src=window.URL.createObjectURL(s.response))}))},C=function(){window.URL.revokeObjectURL(s.src),g(s)},S=function(){x("arraybuffer",(function(){A()&&E.decodeAudioData(s.response,(function(e){s=null,g(e)}),(function(e){L(e)}))}))},w=function(e){s=document.createElement(e),p||(window.clearTimeout(c),c=window.setTimeout(R,2e3),s.addEventListener("canplaythrough",R,!1)),s.addEventListener("error",L,!1),s.preload="auto",s.src=h+d,s.load(),p&&g(s)},L=function(e){window.clearTimeout(c);var n=e;s&&s.tagName&&s.error?n="MediaError: "+["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"][s.error.code]+" "+s.src:s&&s.statusText?n=s.statusText:e&&e.message?n=e.message:e&&e.type&&(n=e.type),t.emit("error",'Error loading "'+h+d+'" '+n),I()},N=function(){t.off("error"),t.off("progress"),t.off("complete"),s&&(s.removeEventListener("progress",T),s.removeEventListener("load",n),s.removeEventListener("error",L),s.removeEventListener("load",R),s.removeEventListener("canplaythrough",R),s.removeEventListener("load",C))},I=function(){N(),s&&s.abort&&s.readyState<4&&s.abort(),s=null,E=null,u=null,window.clearTimeout(c),t.emit("destroy",l)};return t=Object.create(o.prototype,{_events:{value:{}},id:{value:e.id},start:{value:function(){switch(a=Date.now(),_){case"json":x("json",(function(){if(A()){var e=s.response;"string"==typeof e&&(e=JSON.parse(e)),g(e)}}));break;case"jpg":case"png":case"gif":case"webp":case"svg":m?M():y();break;case"mp3":case"ogg":case"opus":case"wav":case"m4a":E?S():w("audio");break;case"ogv":case"mp4":case"webm":case"hls":m?x("blob"):w("video");break;case"bin":case"binary":x("arraybuffer");break;case"txt":case"text":x("text");break;default:throw"AssetsLoader ERROR: Unknown type for file with URL: "+h+d+" ("+_+")"}}},loaded:{get:function(){return!!u}},file:{get:function(){return u}},destroy:{value:I}})}},302:e=>{"use strict";e.exports={mbs:0,secs:0,update:function(e,t,n,o){var r,i=e.getAllResponseHeaders();if(i){var s=i.match(/content-length: (\d+)/i);s&&s.length&&(r=s[1])}if(r){var a=(r=parseInt(r,10))/1024/1024,c=(Date.now()-t)/1e3;this.secs+=c,this.mbs+=a,o&&this.log(n,a,c)}else o&&console.warn.call(console,"Can't get Content-Length:",n)},log:function(e,t,n){if(e){var o="File loaded: "+e.substr(e.lastIndexOf("/")+1)+" size:"+t.toFixed(2)+"mb time:"+n.toFixed(2)+"s speed:"+(t/n).toFixed(2)+"mbps";console.log.call(console,o)}var r="Total loaded: "+this.mbs.toFixed(2)+"mb time:"+this.secs.toFixed(2)+"s speed:"+this.getMbps().toFixed(2)+"mbps";console.log.call(console,r)},getMbps:function(){return this.mbs/this.secs}}},7:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,o=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function i(){i.init.call(this)}e.exports=i,e.exports.once=function(e,t){return new Promise((function(n,o){function r(n){e.removeListener(t,i),o(n)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}p(e,t,i,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&p(e,"error",t,{once:!0})}(e,r)}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,n,o){var r,i,s,u;if(a(n),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events),s=i[t]),void 0===s)s=i[t]=n,++e._eventsCount;else if("function"==typeof s?s=i[t]=o?[n,s]:[s,n]:o?s.unshift(n):s.push(n),(r=c(e))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,u=l,console&&console.warn&&console.warn(u)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=l.bind(o);return r.listener=n,o.wrapFn=r,r}function d(e,t,n){var o=e._events;if(void 0===o)return[];var r=o[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):f(r,r.length)}function _(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}function p(e,t,n,o){if("function"==typeof e.on)o.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(i){o.once&&e.removeEventListener(t,r),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return c(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,l=f(c,u);for(n=0;n<u;++n)o(l[n],this,t)}return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,o,r,i,s;if(a(t),void 0===(o=this._events))return this;if(void 0===(n=o[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,i=n.length-1;i>=0;i--)if(n[i]===t||n[i].listener===t){s=n[i].listener,r=i;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(o[e]=n[0]),void 0!==o.removeListener&&this.emit("removeListener",e,s||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,o;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,i=Object.keys(n);for(o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},i.prototype.listeners=function(e){return d(this,e,!0)},i.prototype.rawListeners=function(e){return d(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):_.call(e,t)},i.prototype.listenerCount=_,i.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},823:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ARRAY_TYPE:()=>r,EPSILON:()=>o,RANDOM:()=>i,equals:()=>u,setMatrixArrayType:()=>s,toRadian:()=>c});var o=1e-6,r="undefined"!=typeof Float32Array?Float32Array:Array,i=Math.random;function s(e){r=e}var a=Math.PI/180;function c(e){return e*a}function u(e,t){return Math.abs(e-t)<=o*Math.max(1,Math.abs(e),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},503:(e,t,n)=>{"use strict";n.r(t),n.d(t,{glMatrix:()=>s,mat2:()=>o,mat2d:()=>r,mat3:()=>re,mat4:()=>ie,quat:()=>se,quat2:()=>i,vec2:()=>je,vec3:()=>We,vec4:()=>qe});var o={};n.r(o),n.d(o,{LDU:()=>y,add:()=>R,adjoint:()=>p,clone:()=>c,copy:()=>u,create:()=>a,determinant:()=>m,equals:()=>S,exactEquals:()=>C,frob:()=>A,fromRotation:()=>x,fromScaling:()=>T,fromValues:()=>h,identity:()=>l,invert:()=>f,mul:()=>N,multiply:()=>E,multiplyScalar:()=>w,multiplyScalarAndAdd:()=>L,rotate:()=>v,scale:()=>g,set:()=>d,str:()=>b,sub:()=>I,subtract:()=>M,transpose:()=>_});var r={};n.r(r),n.d(r,{add:()=>Z,clone:()=>P,copy:()=>F,create:()=>O,determinant:()=>V,equals:()=>te,exactEquals:()=>ee,frob:()=>K,fromRotation:()=>Y,fromScaling:()=>j,fromTranslation:()=>W,fromValues:()=>D,identity:()=>U,invert:()=>z,mul:()=>ne,multiply:()=>G,multiplyScalar:()=>J,multiplyScalarAndAdd:()=>$,rotate:()=>X,scale:()=>H,set:()=>B,str:()=>q,sub:()=>oe,subtract:()=>Q,translate:()=>k});var i={};n.r(i),n.d(i,{add:()=>Le,clone:()=>ce,conjugate:()=>De,copy:()=>pe,create:()=>ae,dot:()=>Pe,equals:()=>Ye,exactEquals:()=>ke,fromMat4:()=>fe,fromRotation:()=>_e,fromRotationTranslation:()=>he,fromRotationTranslationValues:()=>le,fromTranslation:()=>de,fromValues:()=>ue,getDual:()=>ge,getReal:()=>ve,getTranslation:()=>be,identity:()=>me,invert:()=>Ue,len:()=>ze,length:()=>Be,lerp:()=>Fe,mul:()=>Ie,multiply:()=>Ne,normalize:()=>Xe,rotateAroundAxis:()=>we,rotateByQuatAppend:()=>Ce,rotateByQuatPrepend:()=>Se,rotateX:()=>ye,rotateY:()=>Re,rotateZ:()=>Me,scale:()=>Oe,set:()=>Ee,setDual:()=>Te,setReal:()=>xe,sqrLen:()=>Ge,squaredLength:()=>Ve,str:()=>He,translate:()=>Ae});var s=n(823);function a(){var e=new s.ARRAY_TYPE(4);return s.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function c(e){var t=new s.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function h(e,t,n,o){var r=new s.ARRAY_TYPE(4);return r[0]=e,r[1]=t,r[2]=n,r[3]=o,r}function d(e,t,n,o,r){return e[0]=t,e[1]=n,e[2]=o,e[3]=r,e}function _(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function f(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=n*i-r*o;return s?(s=1/s,e[0]=i*s,e[1]=-o*s,e[2]=-r*s,e[3]=n*s,e):null}function p(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function m(e){return e[0]*e[3]-e[2]*e[1]}function E(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=n[0],c=n[1],u=n[2],l=n[3];return e[0]=o*a+i*c,e[1]=r*a+s*c,e[2]=o*u+i*l,e[3]=r*u+s*l,e}function v(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=Math.sin(n),c=Math.cos(n);return e[0]=o*c+i*a,e[1]=r*c+s*a,e[2]=o*-a+i*c,e[3]=r*-a+s*c,e}function g(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=n[0],c=n[1];return e[0]=o*a,e[1]=r*a,e[2]=i*c,e[3]=s*c,e}function x(e,t){var n=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=n,e[2]=-n,e[3]=o,e}function T(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function b(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function A(e){return Math.hypot(e[0],e[1],e[2],e[3])}function y(e,t,n,o){return e[2]=o[2]/o[0],n[0]=o[0],n[1]=o[1],n[3]=o[3]-e[2]*n[1],[e,t,n]}function R(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function M(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function C(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function S(e,t){var n=e[0],o=e[1],r=e[2],i=e[3],a=t[0],c=t[1],u=t[2],l=t[3];return Math.abs(n-a)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-c)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(r-u)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-l)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))}function w(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function L(e,t,n,o){return e[0]=t[0]+n[0]*o,e[1]=t[1]+n[1]*o,e[2]=t[2]+n[2]*o,e[3]=t[3]+n[3]*o,e}var N=E,I=M;function O(){var e=new s.ARRAY_TYPE(6);return s.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function P(e){var t=new s.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function F(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function U(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function D(e,t,n,o,r,i){var a=new s.ARRAY_TYPE(6);return a[0]=e,a[1]=t,a[2]=n,a[3]=o,a[4]=r,a[5]=i,a}function B(e,t,n,o,r,i,s){return e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=i,e[5]=s,e}function z(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],a=t[5],c=n*i-o*r;return c?(c=1/c,e[0]=i*c,e[1]=-o*c,e[2]=-r*c,e[3]=n*c,e[4]=(r*a-i*s)*c,e[5]=(o*s-n*a)*c,e):null}function V(e){return e[0]*e[3]-e[1]*e[2]}function G(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=t[4],c=t[5],u=n[0],l=n[1],h=n[2],d=n[3],_=n[4],f=n[5];return e[0]=o*u+i*l,e[1]=r*u+s*l,e[2]=o*h+i*d,e[3]=r*h+s*d,e[4]=o*_+i*f+a,e[5]=r*_+s*f+c,e}function X(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=t[4],c=t[5],u=Math.sin(n),l=Math.cos(n);return e[0]=o*l+i*u,e[1]=r*l+s*u,e[2]=o*-u+i*l,e[3]=r*-u+s*l,e[4]=a,e[5]=c,e}function H(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=t[4],c=t[5],u=n[0],l=n[1];return e[0]=o*u,e[1]=r*u,e[2]=i*l,e[3]=s*l,e[4]=a,e[5]=c,e}function k(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=t[4],c=t[5],u=n[0],l=n[1];return e[0]=o,e[1]=r,e[2]=i,e[3]=s,e[4]=o*u+i*l+a,e[5]=r*u+s*l+c,e}function Y(e,t){var n=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=n,e[2]=-n,e[3]=o,e[4]=0,e[5]=0,e}function j(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function W(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function q(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function K(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function Z(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function Q(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function J(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function $(e,t,n,o){return e[0]=t[0]+n[0]*o,e[1]=t[1]+n[1]*o,e[2]=t[2]+n[2]*o,e[3]=t[3]+n[3]*o,e[4]=t[4]+n[4]*o,e[5]=t[5]+n[5]*o,e}function ee(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function te(e,t){var n=e[0],o=e[1],r=e[2],i=e[3],a=e[4],c=e[5],u=t[0],l=t[1],h=t[2],d=t[3],_=t[4],f=t[5];return Math.abs(n-u)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-l)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(r-h)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-d)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-_)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(c-f)<=s.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))}var ne=G,oe=Q,re=n(409),ie=n(684),se=n(221);function ae(){var e=new s.ARRAY_TYPE(8);return s.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function ce(e){var t=new s.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function ue(e,t,n,o,r,i,a,c){var u=new s.ARRAY_TYPE(8);return u[0]=e,u[1]=t,u[2]=n,u[3]=o,u[4]=r,u[5]=i,u[6]=a,u[7]=c,u}function le(e,t,n,o,r,i,a){var c=new s.ARRAY_TYPE(8);c[0]=e,c[1]=t,c[2]=n,c[3]=o;var u=.5*r,l=.5*i,h=.5*a;return c[4]=u*o+l*n-h*t,c[5]=l*o+h*e-u*n,c[6]=h*o+u*t-l*e,c[7]=-u*e-l*t-h*n,c}function he(e,t,n){var o=.5*n[0],r=.5*n[1],i=.5*n[2],s=t[0],a=t[1],c=t[2],u=t[3];return e[0]=s,e[1]=a,e[2]=c,e[3]=u,e[4]=o*u+r*c-i*a,e[5]=r*u+i*s-o*c,e[6]=i*u+o*a-r*s,e[7]=-o*s-r*a-i*c,e}function de(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function _e(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function fe(e,t){var n=se.create();ie.getRotation(n,t);var o=new s.ARRAY_TYPE(3);return ie.getTranslation(o,t),he(e,n,o),e}function pe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function me(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function Ee(e,t,n,o,r,i,s,a,c){return e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=i,e[5]=s,e[6]=a,e[7]=c,e}var ve=se.copy;function ge(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var xe=se.copy;function Te(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function be(e,t){var n=t[4],o=t[5],r=t[6],i=t[7],s=-t[0],a=-t[1],c=-t[2],u=t[3];return e[0]=2*(n*u+i*s+o*c-r*a),e[1]=2*(o*u+i*a+r*s-n*c),e[2]=2*(r*u+i*c+n*a-o*s),e}function Ae(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=.5*n[0],c=.5*n[1],u=.5*n[2],l=t[4],h=t[5],d=t[6],_=t[7];return e[0]=o,e[1]=r,e[2]=i,e[3]=s,e[4]=s*a+r*u-i*c+l,e[5]=s*c+i*a-o*u+h,e[6]=s*u+o*c-r*a+d,e[7]=-o*a-r*c-i*u+_,e}function ye(e,t,n){var o=-t[0],r=-t[1],i=-t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],h=a*s+l*o+c*i-u*r,d=c*s+l*r+u*o-a*i,_=u*s+l*i+a*r-c*o,f=l*s-a*o-c*r-u*i;return se.rotateX(e,t,n),o=e[0],r=e[1],i=e[2],s=e[3],e[4]=h*s+f*o+d*i-_*r,e[5]=d*s+f*r+_*o-h*i,e[6]=_*s+f*i+h*r-d*o,e[7]=f*s-h*o-d*r-_*i,e}function Re(e,t,n){var o=-t[0],r=-t[1],i=-t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],h=a*s+l*o+c*i-u*r,d=c*s+l*r+u*o-a*i,_=u*s+l*i+a*r-c*o,f=l*s-a*o-c*r-u*i;return se.rotateY(e,t,n),o=e[0],r=e[1],i=e[2],s=e[3],e[4]=h*s+f*o+d*i-_*r,e[5]=d*s+f*r+_*o-h*i,e[6]=_*s+f*i+h*r-d*o,e[7]=f*s-h*o-d*r-_*i,e}function Me(e,t,n){var o=-t[0],r=-t[1],i=-t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],h=a*s+l*o+c*i-u*r,d=c*s+l*r+u*o-a*i,_=u*s+l*i+a*r-c*o,f=l*s-a*o-c*r-u*i;return se.rotateZ(e,t,n),o=e[0],r=e[1],i=e[2],s=e[3],e[4]=h*s+f*o+d*i-_*r,e[5]=d*s+f*r+_*o-h*i,e[6]=_*s+f*i+h*r-d*o,e[7]=f*s-h*o-d*r-_*i,e}function Ce(e,t,n){var o=n[0],r=n[1],i=n[2],s=n[3],a=t[0],c=t[1],u=t[2],l=t[3];return e[0]=a*s+l*o+c*i-u*r,e[1]=c*s+l*r+u*o-a*i,e[2]=u*s+l*i+a*r-c*o,e[3]=l*s-a*o-c*r-u*i,a=t[4],c=t[5],u=t[6],l=t[7],e[4]=a*s+l*o+c*i-u*r,e[5]=c*s+l*r+u*o-a*i,e[6]=u*s+l*i+a*r-c*o,e[7]=l*s-a*o-c*r-u*i,e}function Se(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=n[0],c=n[1],u=n[2],l=n[3];return e[0]=o*l+s*a+r*u-i*c,e[1]=r*l+s*c+i*a-o*u,e[2]=i*l+s*u+o*c-r*a,e[3]=s*l-o*a-r*c-i*u,a=n[4],c=n[5],u=n[6],l=n[7],e[4]=o*l+s*a+r*u-i*c,e[5]=r*l+s*c+i*a-o*u,e[6]=i*l+s*u+o*c-r*a,e[7]=s*l-o*a-r*c-i*u,e}function we(e,t,n,o){if(Math.abs(o)<s.EPSILON)return pe(e,t);var r=Math.hypot(n[0],n[1],n[2]);o*=.5;var i=Math.sin(o),a=i*n[0]/r,c=i*n[1]/r,u=i*n[2]/r,l=Math.cos(o),h=t[0],d=t[1],_=t[2],f=t[3];e[0]=h*l+f*a+d*u-_*c,e[1]=d*l+f*c+_*a-h*u,e[2]=_*l+f*u+h*c-d*a,e[3]=f*l-h*a-d*c-_*u;var p=t[4],m=t[5],E=t[6],v=t[7];return e[4]=p*l+v*a+m*u-E*c,e[5]=m*l+v*c+E*a-p*u,e[6]=E*l+v*u+p*c-m*a,e[7]=v*l-p*a-m*c-E*u,e}function Le(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function Ne(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=n[4],c=n[5],u=n[6],l=n[7],h=t[4],d=t[5],_=t[6],f=t[7],p=n[0],m=n[1],E=n[2],v=n[3];return e[0]=o*v+s*p+r*E-i*m,e[1]=r*v+s*m+i*p-o*E,e[2]=i*v+s*E+o*m-r*p,e[3]=s*v-o*p-r*m-i*E,e[4]=o*l+s*a+r*u-i*c+h*v+f*p+d*E-_*m,e[5]=r*l+s*c+i*a-o*u+d*v+f*m+_*p-h*E,e[6]=i*l+s*u+o*c-r*a+_*v+f*E+h*m-d*p,e[7]=s*l-o*a-r*c-i*u+f*v-h*p-d*m-_*E,e}var Ie=Ne;function Oe(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}var Pe=se.dot;function Fe(e,t,n,o){var r=1-o;return Pe(t,n)<0&&(o=-o),e[0]=t[0]*r+n[0]*o,e[1]=t[1]*r+n[1]*o,e[2]=t[2]*r+n[2]*o,e[3]=t[3]*r+n[3]*o,e[4]=t[4]*r+n[4]*o,e[5]=t[5]*r+n[5]*o,e[6]=t[6]*r+n[6]*o,e[7]=t[7]*r+n[7]*o,e}function Ue(e,t){var n=Ve(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function De(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var Be=se.length,ze=Be,Ve=se.squaredLength,Ge=Ve;function Xe(e,t){var n=Ve(t);if(n>0){n=Math.sqrt(n);var o=t[0]/n,r=t[1]/n,i=t[2]/n,s=t[3]/n,a=t[4],c=t[5],u=t[6],l=t[7],h=o*a+r*c+i*u+s*l;e[0]=o,e[1]=r,e[2]=i,e[3]=s,e[4]=(a-o*h)/n,e[5]=(c-r*h)/n,e[6]=(u-i*h)/n,e[7]=(l-s*h)/n}return e}function He(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function ke(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function Ye(e,t){var n=e[0],o=e[1],r=e[2],i=e[3],a=e[4],c=e[5],u=e[6],l=e[7],h=t[0],d=t[1],_=t[2],f=t[3],p=t[4],m=t[5],E=t[6],v=t[7];return Math.abs(n-h)<=s.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-d)<=s.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(r-_)<=s.EPSILON*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-f)<=s.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-p)<=s.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(c-m)<=s.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(u-E)<=s.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(l-v)<=s.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))}var je=n(842),We=n(329),qe=n(796)},409:(e,t,n)=>{"use strict";n.r(t),n.d(t,{add:()=>S,adjoint:()=>_,clone:()=>s,copy:()=>a,create:()=>r,determinant:()=>f,equals:()=>O,exactEquals:()=>I,frob:()=>C,fromMat2d:()=>b,fromMat4:()=>i,fromQuat:()=>A,fromRotation:()=>x,fromScaling:()=>T,fromTranslation:()=>g,fromValues:()=>c,identity:()=>l,invert:()=>d,mul:()=>P,multiply:()=>p,multiplyScalar:()=>L,multiplyScalarAndAdd:()=>N,normalFromMat4:()=>y,projection:()=>R,rotate:()=>E,scale:()=>v,set:()=>u,str:()=>M,sub:()=>F,subtract:()=>w,translate:()=>m,transpose:()=>h});var o=n(823);function r(){var e=new o.ARRAY_TYPE(9);return o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function s(e){var t=new o.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function c(e,t,n,r,i,s,a,c,u){var l=new o.ARRAY_TYPE(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=s,l[6]=a,l[7]=c,l[8]=u,l}function u(e,t,n,o,r,i,s,a,c,u){return e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=i,e[5]=s,e[6]=a,e[7]=c,e[8]=u,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function h(e,t){if(e===t){var n=t[1],o=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=o,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function d(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],a=t[5],c=t[6],u=t[7],l=t[8],h=l*s-a*u,d=-l*i+a*c,_=u*i-s*c,f=n*h+o*d+r*_;return f?(f=1/f,e[0]=h*f,e[1]=(-l*o+r*u)*f,e[2]=(a*o-r*s)*f,e[3]=d*f,e[4]=(l*n-r*c)*f,e[5]=(-a*n+r*i)*f,e[6]=_*f,e[7]=(-u*n+o*c)*f,e[8]=(s*n-o*i)*f,e):null}function _(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],a=t[5],c=t[6],u=t[7],l=t[8];return e[0]=s*l-a*u,e[1]=r*u-o*l,e[2]=o*a-r*s,e[3]=a*c-i*l,e[4]=n*l-r*c,e[5]=r*i-n*a,e[6]=i*u-s*c,e[7]=o*c-n*u,e[8]=n*s-o*i,e}function f(e){var t=e[0],n=e[1],o=e[2],r=e[3],i=e[4],s=e[5],a=e[6],c=e[7],u=e[8];return t*(u*i-s*c)+n*(-u*r+s*a)+o*(c*r-i*a)}function p(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],h=t[8],d=n[0],_=n[1],f=n[2],p=n[3],m=n[4],E=n[5],v=n[6],g=n[7],x=n[8];return e[0]=d*o+_*s+f*u,e[1]=d*r+_*a+f*l,e[2]=d*i+_*c+f*h,e[3]=p*o+m*s+E*u,e[4]=p*r+m*a+E*l,e[5]=p*i+m*c+E*h,e[6]=v*o+g*s+x*u,e[7]=v*r+g*a+x*l,e[8]=v*i+g*c+x*h,e}function m(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],h=t[8],d=n[0],_=n[1];return e[0]=o,e[1]=r,e[2]=i,e[3]=s,e[4]=a,e[5]=c,e[6]=d*o+_*s+u,e[7]=d*r+_*a+l,e[8]=d*i+_*c+h,e}function E(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],h=t[8],d=Math.sin(n),_=Math.cos(n);return e[0]=_*o+d*s,e[1]=_*r+d*a,e[2]=_*i+d*c,e[3]=_*s-d*o,e[4]=_*a-d*r,e[5]=_*c-d*i,e[6]=u,e[7]=l,e[8]=h,e}function v(e,t,n){var o=n[0],r=n[1];return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function g(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function x(e,t){var n=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=n,e[2]=0,e[3]=-n,e[4]=o,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function T(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function b(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function A(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=n+n,a=o+o,c=r+r,u=n*s,l=o*s,h=o*a,d=r*s,_=r*a,f=r*c,p=i*s,m=i*a,E=i*c;return e[0]=1-h-f,e[3]=l-E,e[6]=d+m,e[1]=l+E,e[4]=1-u-f,e[7]=_-p,e[2]=d-m,e[5]=_+p,e[8]=1-u-h,e}function y(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],a=t[5],c=t[6],u=t[7],l=t[8],h=t[9],d=t[10],_=t[11],f=t[12],p=t[13],m=t[14],E=t[15],v=n*a-o*s,g=n*c-r*s,x=n*u-i*s,T=o*c-r*a,b=o*u-i*a,A=r*u-i*c,y=l*p-h*f,R=l*m-d*f,M=l*E-_*f,C=h*m-d*p,S=h*E-_*p,w=d*E-_*m,L=v*w-g*S+x*C+T*M-b*R+A*y;return L?(L=1/L,e[0]=(a*w-c*S+u*C)*L,e[1]=(c*M-s*w-u*R)*L,e[2]=(s*S-a*M+u*y)*L,e[3]=(r*S-o*w-i*C)*L,e[4]=(n*w-r*M+i*R)*L,e[5]=(o*M-n*S-i*y)*L,e[6]=(p*A-m*b+E*T)*L,e[7]=(m*x-f*A-E*g)*L,e[8]=(f*b-p*x+E*v)*L,e):null}function R(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function M(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function C(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function S(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function w(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function L(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function N(e,t,n,o){return e[0]=t[0]+n[0]*o,e[1]=t[1]+n[1]*o,e[2]=t[2]+n[2]*o,e[3]=t[3]+n[3]*o,e[4]=t[4]+n[4]*o,e[5]=t[5]+n[5]*o,e[6]=t[6]+n[6]*o,e[7]=t[7]+n[7]*o,e[8]=t[8]+n[8]*o,e}function I(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function O(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],c=e[5],u=e[6],l=e[7],h=e[8],d=t[0],_=t[1],f=t[2],p=t[3],m=t[4],E=t[5],v=t[6],g=t[7],x=t[8];return Math.abs(n-d)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-_)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-p)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-m)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(c-E)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(u-v)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-g)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(h-x)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))}var P=p,F=w},684:(e,t,n)=>{"use strict";n.r(t),n.d(t,{add:()=>W,adjoint:()=>d,clone:()=>i,copy:()=>s,create:()=>r,determinant:()=>_,equals:()=>J,exactEquals:()=>Q,frob:()=>j,fromQuat:()=>P,fromQuat2:()=>S,fromRotation:()=>A,fromRotationTranslation:()=>C,fromRotationTranslationScale:()=>I,fromRotationTranslationScaleOrigin:()=>O,fromScaling:()=>b,fromTranslation:()=>T,fromValues:()=>a,fromXRotation:()=>y,fromYRotation:()=>R,fromZRotation:()=>M,frustum:()=>F,getRotation:()=>N,getScaling:()=>L,getTranslation:()=>w,identity:()=>u,invert:()=>h,lookAt:()=>H,mul:()=>$,multiply:()=>f,multiplyScalar:()=>K,multiplyScalarAndAdd:()=>Z,ortho:()=>G,orthoNO:()=>V,orthoZO:()=>X,perspective:()=>D,perspectiveFromFieldOfView:()=>z,perspectiveNO:()=>U,perspectiveZO:()=>B,rotate:()=>E,rotateX:()=>v,rotateY:()=>g,rotateZ:()=>x,scale:()=>m,set:()=>c,str:()=>Y,sub:()=>ee,subtract:()=>q,targetTo:()=>k,translate:()=>p,transpose:()=>l});var o=n(823);function r(){var e=new o.ARRAY_TYPE(16);return o.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function i(e){var t=new o.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function s(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function a(e,t,n,r,i,s,a,c,u,l,h,d,_,f,p,m){var E=new o.ARRAY_TYPE(16);return E[0]=e,E[1]=t,E[2]=n,E[3]=r,E[4]=i,E[5]=s,E[6]=a,E[7]=c,E[8]=u,E[9]=l,E[10]=h,E[11]=d,E[12]=_,E[13]=f,E[14]=p,E[15]=m,E}function c(e,t,n,o,r,i,s,a,c,u,l,h,d,_,f,p,m){return e[0]=t,e[1]=n,e[2]=o,e[3]=r,e[4]=i,e[5]=s,e[6]=a,e[7]=c,e[8]=u,e[9]=l,e[10]=h,e[11]=d,e[12]=_,e[13]=f,e[14]=p,e[15]=m,e}function u(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e,t){if(e===t){var n=t[1],o=t[2],r=t[3],i=t[6],s=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=o,e[9]=i,e[11]=t[14],e[12]=r,e[13]=s,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function h(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],a=t[5],c=t[6],u=t[7],l=t[8],h=t[9],d=t[10],_=t[11],f=t[12],p=t[13],m=t[14],E=t[15],v=n*a-o*s,g=n*c-r*s,x=n*u-i*s,T=o*c-r*a,b=o*u-i*a,A=r*u-i*c,y=l*p-h*f,R=l*m-d*f,M=l*E-_*f,C=h*m-d*p,S=h*E-_*p,w=d*E-_*m,L=v*w-g*S+x*C+T*M-b*R+A*y;return L?(L=1/L,e[0]=(a*w-c*S+u*C)*L,e[1]=(r*S-o*w-i*C)*L,e[2]=(p*A-m*b+E*T)*L,e[3]=(d*b-h*A-_*T)*L,e[4]=(c*M-s*w-u*R)*L,e[5]=(n*w-r*M+i*R)*L,e[6]=(m*x-f*A-E*g)*L,e[7]=(l*A-d*x+_*g)*L,e[8]=(s*S-a*M+u*y)*L,e[9]=(o*M-n*S-i*y)*L,e[10]=(f*b-p*x+E*v)*L,e[11]=(h*x-l*b-_*v)*L,e[12]=(a*R-s*C-c*y)*L,e[13]=(n*C-o*R+r*y)*L,e[14]=(p*g-f*T-m*v)*L,e[15]=(l*T-h*g+d*v)*L,e):null}function d(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],a=t[5],c=t[6],u=t[7],l=t[8],h=t[9],d=t[10],_=t[11],f=t[12],p=t[13],m=t[14],E=t[15];return e[0]=a*(d*E-_*m)-h*(c*E-u*m)+p*(c*_-u*d),e[1]=-(o*(d*E-_*m)-h*(r*E-i*m)+p*(r*_-i*d)),e[2]=o*(c*E-u*m)-a*(r*E-i*m)+p*(r*u-i*c),e[3]=-(o*(c*_-u*d)-a*(r*_-i*d)+h*(r*u-i*c)),e[4]=-(s*(d*E-_*m)-l*(c*E-u*m)+f*(c*_-u*d)),e[5]=n*(d*E-_*m)-l*(r*E-i*m)+f*(r*_-i*d),e[6]=-(n*(c*E-u*m)-s*(r*E-i*m)+f*(r*u-i*c)),e[7]=n*(c*_-u*d)-s*(r*_-i*d)+l*(r*u-i*c),e[8]=s*(h*E-_*p)-l*(a*E-u*p)+f*(a*_-u*h),e[9]=-(n*(h*E-_*p)-l*(o*E-i*p)+f*(o*_-i*h)),e[10]=n*(a*E-u*p)-s*(o*E-i*p)+f*(o*u-i*a),e[11]=-(n*(a*_-u*h)-s*(o*_-i*h)+l*(o*u-i*a)),e[12]=-(s*(h*m-d*p)-l*(a*m-c*p)+f*(a*d-c*h)),e[13]=n*(h*m-d*p)-l*(o*m-r*p)+f*(o*d-r*h),e[14]=-(n*(a*m-c*p)-s*(o*m-r*p)+f*(o*c-r*a)),e[15]=n*(a*d-c*h)-s*(o*d-r*h)+l*(o*c-r*a),e}function _(e){var t=e[0],n=e[1],o=e[2],r=e[3],i=e[4],s=e[5],a=e[6],c=e[7],u=e[8],l=e[9],h=e[10],d=e[11],_=e[12],f=e[13],p=e[14],m=e[15];return(t*s-n*i)*(h*m-d*p)-(t*a-o*i)*(l*m-d*f)+(t*c-r*i)*(l*p-h*f)+(n*a-o*s)*(u*m-d*_)-(n*c-r*s)*(u*p-h*_)+(o*c-r*a)*(u*f-l*_)}function f(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],h=t[8],d=t[9],_=t[10],f=t[11],p=t[12],m=t[13],E=t[14],v=t[15],g=n[0],x=n[1],T=n[2],b=n[3];return e[0]=g*o+x*a+T*h+b*p,e[1]=g*r+x*c+T*d+b*m,e[2]=g*i+x*u+T*_+b*E,e[3]=g*s+x*l+T*f+b*v,g=n[4],x=n[5],T=n[6],b=n[7],e[4]=g*o+x*a+T*h+b*p,e[5]=g*r+x*c+T*d+b*m,e[6]=g*i+x*u+T*_+b*E,e[7]=g*s+x*l+T*f+b*v,g=n[8],x=n[9],T=n[10],b=n[11],e[8]=g*o+x*a+T*h+b*p,e[9]=g*r+x*c+T*d+b*m,e[10]=g*i+x*u+T*_+b*E,e[11]=g*s+x*l+T*f+b*v,g=n[12],x=n[13],T=n[14],b=n[15],e[12]=g*o+x*a+T*h+b*p,e[13]=g*r+x*c+T*d+b*m,e[14]=g*i+x*u+T*_+b*E,e[15]=g*s+x*l+T*f+b*v,e}function p(e,t,n){var o,r,i,s,a,c,u,l,h,d,_,f,p=n[0],m=n[1],E=n[2];return t===e?(e[12]=t[0]*p+t[4]*m+t[8]*E+t[12],e[13]=t[1]*p+t[5]*m+t[9]*E+t[13],e[14]=t[2]*p+t[6]*m+t[10]*E+t[14],e[15]=t[3]*p+t[7]*m+t[11]*E+t[15]):(o=t[0],r=t[1],i=t[2],s=t[3],a=t[4],c=t[5],u=t[6],l=t[7],h=t[8],d=t[9],_=t[10],f=t[11],e[0]=o,e[1]=r,e[2]=i,e[3]=s,e[4]=a,e[5]=c,e[6]=u,e[7]=l,e[8]=h,e[9]=d,e[10]=_,e[11]=f,e[12]=o*p+a*m+h*E+t[12],e[13]=r*p+c*m+d*E+t[13],e[14]=i*p+u*m+_*E+t[14],e[15]=s*p+l*m+f*E+t[15]),e}function m(e,t,n){var o=n[0],r=n[1],i=n[2];return e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function E(e,t,n,r){var i,s,a,c,u,l,h,d,_,f,p,m,E,v,g,x,T,b,A,y,R,M,C,S,w=r[0],L=r[1],N=r[2],I=Math.hypot(w,L,N);return I<o.EPSILON?null:(w*=I=1/I,L*=I,N*=I,i=Math.sin(n),a=1-(s=Math.cos(n)),c=t[0],u=t[1],l=t[2],h=t[3],d=t[4],_=t[5],f=t[6],p=t[7],m=t[8],E=t[9],v=t[10],g=t[11],x=w*w*a+s,T=L*w*a+N*i,b=N*w*a-L*i,A=w*L*a-N*i,y=L*L*a+s,R=N*L*a+w*i,M=w*N*a+L*i,C=L*N*a-w*i,S=N*N*a+s,e[0]=c*x+d*T+m*b,e[1]=u*x+_*T+E*b,e[2]=l*x+f*T+v*b,e[3]=h*x+p*T+g*b,e[4]=c*A+d*y+m*R,e[5]=u*A+_*y+E*R,e[6]=l*A+f*y+v*R,e[7]=h*A+p*y+g*R,e[8]=c*M+d*C+m*S,e[9]=u*M+_*C+E*S,e[10]=l*M+f*C+v*S,e[11]=h*M+p*C+g*S,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function v(e,t,n){var o=Math.sin(n),r=Math.cos(n),i=t[4],s=t[5],a=t[6],c=t[7],u=t[8],l=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*r+u*o,e[5]=s*r+l*o,e[6]=a*r+h*o,e[7]=c*r+d*o,e[8]=u*r-i*o,e[9]=l*r-s*o,e[10]=h*r-a*o,e[11]=d*r-c*o,e}function g(e,t,n){var o=Math.sin(n),r=Math.cos(n),i=t[0],s=t[1],a=t[2],c=t[3],u=t[8],l=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r-u*o,e[1]=s*r-l*o,e[2]=a*r-h*o,e[3]=c*r-d*o,e[8]=i*o+u*r,e[9]=s*o+l*r,e[10]=a*o+h*r,e[11]=c*o+d*r,e}function x(e,t,n){var o=Math.sin(n),r=Math.cos(n),i=t[0],s=t[1],a=t[2],c=t[3],u=t[4],l=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*r+u*o,e[1]=s*r+l*o,e[2]=a*r+h*o,e[3]=c*r+d*o,e[4]=u*r-i*o,e[5]=l*r-s*o,e[6]=h*r-a*o,e[7]=d*r-c*o,e}function T(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function b(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function A(e,t,n){var r,i,s,a=n[0],c=n[1],u=n[2],l=Math.hypot(a,c,u);return l<o.EPSILON?null:(a*=l=1/l,c*=l,u*=l,r=Math.sin(t),s=1-(i=Math.cos(t)),e[0]=a*a*s+i,e[1]=c*a*s+u*r,e[2]=u*a*s-c*r,e[3]=0,e[4]=a*c*s-u*r,e[5]=c*c*s+i,e[6]=u*c*s+a*r,e[7]=0,e[8]=a*u*s+c*r,e[9]=c*u*s-a*r,e[10]=u*u*s+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function y(e,t){var n=Math.sin(t),o=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function R(e,t){var n=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function M(e,t){var n=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function C(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=o+o,c=r+r,u=i+i,l=o*a,h=o*c,d=o*u,_=r*c,f=r*u,p=i*u,m=s*a,E=s*c,v=s*u;return e[0]=1-(_+p),e[1]=h+v,e[2]=d-E,e[3]=0,e[4]=h-v,e[5]=1-(l+p),e[6]=f+m,e[7]=0,e[8]=d+E,e[9]=f-m,e[10]=1-(l+_),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function S(e,t){var n=new o.ARRAY_TYPE(3),r=-t[0],i=-t[1],s=-t[2],a=t[3],c=t[4],u=t[5],l=t[6],h=t[7],d=r*r+i*i+s*s+a*a;return d>0?(n[0]=2*(c*a+h*r+u*s-l*i)/d,n[1]=2*(u*a+h*i+l*r-c*s)/d,n[2]=2*(l*a+h*s+c*i-u*r)/d):(n[0]=2*(c*a+h*r+u*s-l*i),n[1]=2*(u*a+h*i+l*r-c*s),n[2]=2*(l*a+h*s+c*i-u*r)),C(e,t,n),e}function w(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function L(e,t){var n=t[0],o=t[1],r=t[2],i=t[4],s=t[5],a=t[6],c=t[8],u=t[9],l=t[10];return e[0]=Math.hypot(n,o,r),e[1]=Math.hypot(i,s,a),e[2]=Math.hypot(c,u,l),e}function N(e,t){var n=new o.ARRAY_TYPE(3);L(n,t);var r=1/n[0],i=1/n[1],s=1/n[2],a=t[0]*r,c=t[1]*i,u=t[2]*s,l=t[4]*r,h=t[5]*i,d=t[6]*s,_=t[8]*r,f=t[9]*i,p=t[10]*s,m=a+h+p,E=0;return m>0?(E=2*Math.sqrt(m+1),e[3]=.25*E,e[0]=(d-f)/E,e[1]=(_-u)/E,e[2]=(c-l)/E):a>h&&a>p?(E=2*Math.sqrt(1+a-h-p),e[3]=(d-f)/E,e[0]=.25*E,e[1]=(c+l)/E,e[2]=(_+u)/E):h>p?(E=2*Math.sqrt(1+h-a-p),e[3]=(_-u)/E,e[0]=(c+l)/E,e[1]=.25*E,e[2]=(d+f)/E):(E=2*Math.sqrt(1+p-a-h),e[3]=(c-l)/E,e[0]=(_+u)/E,e[1]=(d+f)/E,e[2]=.25*E),e}function I(e,t,n,o){var r=t[0],i=t[1],s=t[2],a=t[3],c=r+r,u=i+i,l=s+s,h=r*c,d=r*u,_=r*l,f=i*u,p=i*l,m=s*l,E=a*c,v=a*u,g=a*l,x=o[0],T=o[1],b=o[2];return e[0]=(1-(f+m))*x,e[1]=(d+g)*x,e[2]=(_-v)*x,e[3]=0,e[4]=(d-g)*T,e[5]=(1-(h+m))*T,e[6]=(p+E)*T,e[7]=0,e[8]=(_+v)*b,e[9]=(p-E)*b,e[10]=(1-(h+f))*b,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function O(e,t,n,o,r){var i=t[0],s=t[1],a=t[2],c=t[3],u=i+i,l=s+s,h=a+a,d=i*u,_=i*l,f=i*h,p=s*l,m=s*h,E=a*h,v=c*u,g=c*l,x=c*h,T=o[0],b=o[1],A=o[2],y=r[0],R=r[1],M=r[2],C=(1-(p+E))*T,S=(_+x)*T,w=(f-g)*T,L=(_-x)*b,N=(1-(d+E))*b,I=(m+v)*b,O=(f+g)*A,P=(m-v)*A,F=(1-(d+p))*A;return e[0]=C,e[1]=S,e[2]=w,e[3]=0,e[4]=L,e[5]=N,e[6]=I,e[7]=0,e[8]=O,e[9]=P,e[10]=F,e[11]=0,e[12]=n[0]+y-(C*y+L*R+O*M),e[13]=n[1]+R-(S*y+N*R+P*M),e[14]=n[2]+M-(w*y+I*R+F*M),e[15]=1,e}function P(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=n+n,a=o+o,c=r+r,u=n*s,l=o*s,h=o*a,d=r*s,_=r*a,f=r*c,p=i*s,m=i*a,E=i*c;return e[0]=1-h-f,e[1]=l+E,e[2]=d-m,e[3]=0,e[4]=l-E,e[5]=1-u-f,e[6]=_+p,e[7]=0,e[8]=d+m,e[9]=_-p,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F(e,t,n,o,r,i,s){var a=1/(n-t),c=1/(r-o),u=1/(i-s);return e[0]=2*i*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*c,e[6]=0,e[7]=0,e[8]=(n+t)*a,e[9]=(r+o)*c,e[10]=(s+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*i*2*u,e[15]=0,e}function U(e,t,n,o,r){var i,s=1/Math.tan(t/2);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(i=1/(o-r),e[10]=(r+o)*i,e[14]=2*r*o*i):(e[10]=-1,e[14]=-2*o),e}var D=U;function B(e,t,n,o,r){var i,s=1/Math.tan(t/2);return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(i=1/(o-r),e[10]=r*i,e[14]=r*o*i):(e[10]=-1,e[14]=-o),e}function z(e,t,n,o){var r=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),c=2/(s+a),u=2/(r+i);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(s-a)*c*.5,e[9]=(r-i)*u*.5,e[10]=o/(n-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n/(n-o),e[15]=0,e}function V(e,t,n,o,r,i,s){var a=1/(t-n),c=1/(o-r),u=1/(i-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*a,e[13]=(r+o)*c,e[14]=(s+i)*u,e[15]=1,e}var G=V;function X(e,t,n,o,r,i,s){var a=1/(t-n),c=1/(o-r),u=1/(i-s);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=u,e[11]=0,e[12]=(t+n)*a,e[13]=(r+o)*c,e[14]=i*u,e[15]=1,e}function H(e,t,n,r){var i,s,a,c,l,h,d,_,f,p,m=t[0],E=t[1],v=t[2],g=r[0],x=r[1],T=r[2],b=n[0],A=n[1],y=n[2];return Math.abs(m-b)<o.EPSILON&&Math.abs(E-A)<o.EPSILON&&Math.abs(v-y)<o.EPSILON?u(e):(d=m-b,_=E-A,f=v-y,i=x*(f*=p=1/Math.hypot(d,_,f))-T*(_*=p),s=T*(d*=p)-g*f,a=g*_-x*d,(p=Math.hypot(i,s,a))?(i*=p=1/p,s*=p,a*=p):(i=0,s=0,a=0),c=_*a-f*s,l=f*i-d*a,h=d*s-_*i,(p=Math.hypot(c,l,h))?(c*=p=1/p,l*=p,h*=p):(c=0,l=0,h=0),e[0]=i,e[1]=c,e[2]=d,e[3]=0,e[4]=s,e[5]=l,e[6]=_,e[7]=0,e[8]=a,e[9]=h,e[10]=f,e[11]=0,e[12]=-(i*m+s*E+a*v),e[13]=-(c*m+l*E+h*v),e[14]=-(d*m+_*E+f*v),e[15]=1,e)}function k(e,t,n,o){var r=t[0],i=t[1],s=t[2],a=o[0],c=o[1],u=o[2],l=r-n[0],h=i-n[1],d=s-n[2],_=l*l+h*h+d*d;_>0&&(l*=_=1/Math.sqrt(_),h*=_,d*=_);var f=c*d-u*h,p=u*l-a*d,m=a*h-c*l;return(_=f*f+p*p+m*m)>0&&(f*=_=1/Math.sqrt(_),p*=_,m*=_),e[0]=f,e[1]=p,e[2]=m,e[3]=0,e[4]=h*m-d*p,e[5]=d*f-l*m,e[6]=l*p-h*f,e[7]=0,e[8]=l,e[9]=h,e[10]=d,e[11]=0,e[12]=r,e[13]=i,e[14]=s,e[15]=1,e}function Y(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function j(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function W(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function q(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function K(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Z(e,t,n,o){return e[0]=t[0]+n[0]*o,e[1]=t[1]+n[1]*o,e[2]=t[2]+n[2]*o,e[3]=t[3]+n[3]*o,e[4]=t[4]+n[4]*o,e[5]=t[5]+n[5]*o,e[6]=t[6]+n[6]*o,e[7]=t[7]+n[7]*o,e[8]=t[8]+n[8]*o,e[9]=t[9]+n[9]*o,e[10]=t[10]+n[10]*o,e[11]=t[11]+n[11]*o,e[12]=t[12]+n[12]*o,e[13]=t[13]+n[13]*o,e[14]=t[14]+n[14]*o,e[15]=t[15]+n[15]*o,e}function Q(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function J(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=e[4],c=e[5],u=e[6],l=e[7],h=e[8],d=e[9],_=e[10],f=e[11],p=e[12],m=e[13],E=e[14],v=e[15],g=t[0],x=t[1],T=t[2],b=t[3],A=t[4],y=t[5],R=t[6],M=t[7],C=t[8],S=t[9],w=t[10],L=t[11],N=t[12],I=t[13],O=t[14],P=t[15];return Math.abs(n-g)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-x)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(i-T)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(s-b)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(a-A)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(c-y)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(u-R)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(l-M)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(h-C)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(d-S)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(_-w)<=o.EPSILON*Math.max(1,Math.abs(_),Math.abs(w))&&Math.abs(f-L)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(L))&&Math.abs(p-N)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(m-I)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(E-O)<=o.EPSILON*Math.max(1,Math.abs(E),Math.abs(O))&&Math.abs(v-P)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(P))}var $=f,ee=q},221:(e,t,n)=>{"use strict";n.r(t),n.d(t,{add:()=>D,calculateW:()=>m,clone:()=>O,conjugate:()=>A,copy:()=>F,create:()=>a,dot:()=>V,equals:()=>q,exactEquals:()=>W,exp:()=>E,fromEuler:()=>R,fromMat3:()=>y,fromValues:()=>P,getAngle:()=>h,getAxisAngle:()=>l,identity:()=>c,invert:()=>b,len:()=>H,length:()=>X,lerp:()=>G,ln:()=>v,mul:()=>B,multiply:()=>d,normalize:()=>j,pow:()=>g,random:()=>T,rotateX:()=>_,rotateY:()=>f,rotateZ:()=>p,rotationTo:()=>K,scale:()=>z,set:()=>U,setAxes:()=>Q,setAxisAngle:()=>u,slerp:()=>x,sqlerp:()=>Z,sqrLen:()=>Y,squaredLength:()=>k,str:()=>M});var o=n(823),r=n(409),i=n(329),s=n(796);function a(){var e=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function c(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function u(e,t,n){n*=.5;var o=Math.sin(n);return e[0]=o*t[0],e[1]=o*t[1],e[2]=o*t[2],e[3]=Math.cos(n),e}function l(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>o.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function h(e,t){var n=V(e,t);return Math.acos(2*n*n-1)}function d(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3],a=n[0],c=n[1],u=n[2],l=n[3];return e[0]=o*l+s*a+r*u-i*c,e[1]=r*l+s*c+i*a-o*u,e[2]=i*l+s*u+o*c-r*a,e[3]=s*l-o*a-r*c-i*u,e}function _(e,t,n){n*=.5;var o=t[0],r=t[1],i=t[2],s=t[3],a=Math.sin(n),c=Math.cos(n);return e[0]=o*c+s*a,e[1]=r*c+i*a,e[2]=i*c-r*a,e[3]=s*c-o*a,e}function f(e,t,n){n*=.5;var o=t[0],r=t[1],i=t[2],s=t[3],a=Math.sin(n),c=Math.cos(n);return e[0]=o*c-i*a,e[1]=r*c+s*a,e[2]=i*c+o*a,e[3]=s*c-r*a,e}function p(e,t,n){n*=.5;var o=t[0],r=t[1],i=t[2],s=t[3],a=Math.sin(n),c=Math.cos(n);return e[0]=o*c+r*a,e[1]=r*c-o*a,e[2]=i*c+s*a,e[3]=s*c-i*a,e}function m(e,t){var n=t[0],o=t[1],r=t[2];return e[0]=n,e[1]=o,e[2]=r,e[3]=Math.sqrt(Math.abs(1-n*n-o*o-r*r)),e}function E(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=Math.sqrt(n*n+o*o+r*r),a=Math.exp(i),c=s>0?a*Math.sin(s)/s:0;return e[0]=n*c,e[1]=o*c,e[2]=r*c,e[3]=a*Math.cos(s),e}function v(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=Math.sqrt(n*n+o*o+r*r),a=s>0?Math.atan2(s,i)/s:0;return e[0]=n*a,e[1]=o*a,e[2]=r*a,e[3]=.5*Math.log(n*n+o*o+r*r+i*i),e}function g(e,t,n){return v(e,t),z(e,e,n),E(e,e),e}function x(e,t,n,r){var i,s,a,c,u,l=t[0],h=t[1],d=t[2],_=t[3],f=n[0],p=n[1],m=n[2],E=n[3];return(s=l*f+h*p+d*m+_*E)<0&&(s=-s,f=-f,p=-p,m=-m,E=-E),1-s>o.EPSILON?(i=Math.acos(s),a=Math.sin(i),c=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(c=1-r,u=r),e[0]=c*l+u*f,e[1]=c*h+u*p,e[2]=c*d+u*m,e[3]=c*_+u*E,e}function T(e){var t=o.RANDOM(),n=o.RANDOM(),r=o.RANDOM(),i=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=s*Math.sin(2*Math.PI*r),e[3]=s*Math.cos(2*Math.PI*r),e}function b(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=n*n+o*o+r*r+i*i,a=s?1/s:0;return e[0]=-n*a,e[1]=-o*a,e[2]=-r*a,e[3]=i*a,e}function A(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function y(e,t){var n,o=t[0]+t[4]+t[8];if(o>0)n=Math.sqrt(o+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);var i=(r+1)%3,s=(r+2)%3;n=Math.sqrt(t[3*r+r]-t[3*i+i]-t[3*s+s]+1),e[r]=.5*n,n=.5/n,e[3]=(t[3*i+s]-t[3*s+i])*n,e[i]=(t[3*i+r]+t[3*r+i])*n,e[s]=(t[3*s+r]+t[3*r+s])*n}return e}function R(e,t,n,o){var r=.5*Math.PI/180;t*=r,n*=r,o*=r;var i=Math.sin(t),s=Math.cos(t),a=Math.sin(n),c=Math.cos(n),u=Math.sin(o),l=Math.cos(o);return e[0]=i*c*l-s*a*u,e[1]=s*a*l+i*c*u,e[2]=s*c*u-i*a*l,e[3]=s*c*l+i*a*u,e}function M(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var C,S,w,L,N,I,O=s.clone,P=s.fromValues,F=s.copy,U=s.set,D=s.add,B=d,z=s.scale,V=s.dot,G=s.lerp,X=s.length,H=X,k=s.squaredLength,Y=k,j=s.normalize,W=s.exactEquals,q=s.equals,K=(C=i.create(),S=i.fromValues(1,0,0),w=i.fromValues(0,1,0),function(e,t,n){var o=i.dot(t,n);return o<-.999999?(i.cross(C,S,t),i.len(C)<1e-6&&i.cross(C,w,t),i.normalize(C,C),u(e,C,Math.PI),e):o>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(i.cross(C,t,n),e[0]=C[0],e[1]=C[1],e[2]=C[2],e[3]=1+o,j(e,e))}),Z=(L=a(),N=a(),function(e,t,n,o,r,i){return x(L,t,r,i),x(N,n,o,i),x(e,L,N,2*i*(1-i)),e}),Q=(I=r.create(),function(e,t,n,o){return I[0]=n[0],I[3]=n[1],I[6]=n[2],I[1]=o[0],I[4]=o[1],I[7]=o[2],I[2]=-t[0],I[5]=-t[1],I[8]=-t[2],j(e,y(e,I))})},842:(e,t,n)=>{"use strict";n.r(t),n.d(t,{add:()=>u,angle:()=>U,ceil:()=>_,clone:()=>i,copy:()=>a,create:()=>r,cross:()=>S,dist:()=>j,distance:()=>x,div:()=>Y,divide:()=>d,dot:()=>C,equals:()=>V,exactEquals:()=>z,floor:()=>f,forEach:()=>K,fromValues:()=>s,inverse:()=>R,len:()=>X,length:()=>b,lerp:()=>w,max:()=>m,min:()=>p,mul:()=>k,multiply:()=>h,negate:()=>y,normalize:()=>M,random:()=>L,rotate:()=>F,round:()=>E,scale:()=>v,scaleAndAdd:()=>g,set:()=>c,sqrDist:()=>W,sqrLen:()=>q,squaredDistance:()=>T,squaredLength:()=>A,str:()=>B,sub:()=>H,subtract:()=>l,transformMat2:()=>N,transformMat2d:()=>I,transformMat3:()=>O,transformMat4:()=>P,zero:()=>D});var o=n(823);function r(){var e=new o.ARRAY_TYPE(2);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function i(e){var t=new o.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function s(e,t){var n=new o.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n}function a(e,t){return e[0]=t[0],e[1]=t[1],e}function c(e,t,n){return e[0]=t,e[1]=n,e}function u(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function l(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function h(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function d(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function _(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function f(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function p(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function m(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function E(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function v(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function g(e,t,n,o){return e[0]=t[0]+n[0]*o,e[1]=t[1]+n[1]*o,e}function x(e,t){var n=t[0]-e[0],o=t[1]-e[1];return Math.hypot(n,o)}function T(e,t){var n=t[0]-e[0],o=t[1]-e[1];return n*n+o*o}function b(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function A(e){var t=e[0],n=e[1];return t*t+n*n}function y(e,t){return e[0]=-t[0],e[1]=-t[1],e}function R(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function M(e,t){var n=t[0],o=t[1],r=n*n+o*o;return r>0&&(r=1/Math.sqrt(r)),e[0]=t[0]*r,e[1]=t[1]*r,e}function C(e,t){return e[0]*t[0]+e[1]*t[1]}function S(e,t,n){var o=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=o,e}function w(e,t,n,o){var r=t[0],i=t[1];return e[0]=r+o*(n[0]-r),e[1]=i+o*(n[1]-i),e}function L(e,t){t=t||1;var n=2*o.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function N(e,t,n){var o=t[0],r=t[1];return e[0]=n[0]*o+n[2]*r,e[1]=n[1]*o+n[3]*r,e}function I(e,t,n){var o=t[0],r=t[1];return e[0]=n[0]*o+n[2]*r+n[4],e[1]=n[1]*o+n[3]*r+n[5],e}function O(e,t,n){var o=t[0],r=t[1];return e[0]=n[0]*o+n[3]*r+n[6],e[1]=n[1]*o+n[4]*r+n[7],e}function P(e,t,n){var o=t[0],r=t[1];return e[0]=n[0]*o+n[4]*r+n[12],e[1]=n[1]*o+n[5]*r+n[13],e}function F(e,t,n,o){var r=t[0]-n[0],i=t[1]-n[1],s=Math.sin(o),a=Math.cos(o);return e[0]=r*a-i*s+n[0],e[1]=r*s+i*a+n[1],e}function U(e,t){var n=e[0],o=e[1],r=t[0],i=t[1],s=Math.sqrt(n*n+o*o)*Math.sqrt(r*r+i*i),a=s&&(n*r+o*i)/s;return Math.acos(Math.min(Math.max(a,-1),1))}function D(e){return e[0]=0,e[1]=0,e}function B(e){return"vec2("+e[0]+", "+e[1]+")"}function z(e,t){return e[0]===t[0]&&e[1]===t[1]}function V(e,t){var n=e[0],r=e[1],i=t[0],s=t[1];return Math.abs(n-i)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-s)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))}var G,X=b,H=l,k=h,Y=d,j=x,W=T,q=A,K=(G=r(),function(e,t,n,o,r,i){var s,a;for(t||(t=2),n||(n=0),a=o?Math.min(o*t+n,e.length):e.length,s=n;s<a;s+=t)G[0]=e[s],G[1]=e[s+1],r(G,G,i),e[s]=G[0],e[s+1]=G[1];return e})},329:(e,t,n)=>{"use strict";n.r(t),n.d(t,{add:()=>l,angle:()=>z,bezier:()=>N,ceil:()=>f,clone:()=>i,copy:()=>c,create:()=>r,cross:()=>S,dist:()=>q,distance:()=>T,div:()=>W,divide:()=>_,dot:()=>C,equals:()=>H,exactEquals:()=>X,floor:()=>p,forEach:()=>J,fromValues:()=>a,hermite:()=>L,inverse:()=>R,len:()=>Z,length:()=>s,lerp:()=>w,max:()=>E,min:()=>m,mul:()=>j,multiply:()=>d,negate:()=>y,normalize:()=>M,random:()=>I,rotateX:()=>U,rotateY:()=>D,rotateZ:()=>B,round:()=>v,scale:()=>g,scaleAndAdd:()=>x,set:()=>u,sqrDist:()=>K,sqrLen:()=>Q,squaredDistance:()=>b,squaredLength:()=>A,str:()=>G,sub:()=>Y,subtract:()=>h,transformMat3:()=>P,transformMat4:()=>O,transformQuat:()=>F,zero:()=>V});var o=n(823);function r(){var e=new o.ARRAY_TYPE(3);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function i(e){var t=new o.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function s(e){var t=e[0],n=e[1],o=e[2];return Math.hypot(t,n,o)}function a(e,t,n){var r=new o.ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=n,r}function c(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function u(e,t,n,o){return e[0]=t,e[1]=n,e[2]=o,e}function l(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function h(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function d(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function _(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function f(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function p(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function m(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function E(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function v(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function g(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function x(e,t,n,o){return e[0]=t[0]+n[0]*o,e[1]=t[1]+n[1]*o,e[2]=t[2]+n[2]*o,e}function T(e,t){var n=t[0]-e[0],o=t[1]-e[1],r=t[2]-e[2];return Math.hypot(n,o,r)}function b(e,t){var n=t[0]-e[0],o=t[1]-e[1],r=t[2]-e[2];return n*n+o*o+r*r}function A(e){var t=e[0],n=e[1],o=e[2];return t*t+n*n+o*o}function y(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function R(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function M(e,t){var n=t[0],o=t[1],r=t[2],i=n*n+o*o+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function C(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function S(e,t,n){var o=t[0],r=t[1],i=t[2],s=n[0],a=n[1],c=n[2];return e[0]=r*c-i*a,e[1]=i*s-o*c,e[2]=o*a-r*s,e}function w(e,t,n,o){var r=t[0],i=t[1],s=t[2];return e[0]=r+o*(n[0]-r),e[1]=i+o*(n[1]-i),e[2]=s+o*(n[2]-s),e}function L(e,t,n,o,r,i){var s=i*i,a=s*(2*i-3)+1,c=s*(i-2)+i,u=s*(i-1),l=s*(3-2*i);return e[0]=t[0]*a+n[0]*c+o[0]*u+r[0]*l,e[1]=t[1]*a+n[1]*c+o[1]*u+r[1]*l,e[2]=t[2]*a+n[2]*c+o[2]*u+r[2]*l,e}function N(e,t,n,o,r,i){var s=1-i,a=s*s,c=i*i,u=a*s,l=3*i*a,h=3*c*s,d=c*i;return e[0]=t[0]*u+n[0]*l+o[0]*h+r[0]*d,e[1]=t[1]*u+n[1]*l+o[1]*h+r[1]*d,e[2]=t[2]*u+n[2]*l+o[2]*h+r[2]*d,e}function I(e,t){t=t||1;var n=2*o.RANDOM()*Math.PI,r=2*o.RANDOM()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function O(e,t,n){var o=t[0],r=t[1],i=t[2],s=n[3]*o+n[7]*r+n[11]*i+n[15];return s=s||1,e[0]=(n[0]*o+n[4]*r+n[8]*i+n[12])/s,e[1]=(n[1]*o+n[5]*r+n[9]*i+n[13])/s,e[2]=(n[2]*o+n[6]*r+n[10]*i+n[14])/s,e}function P(e,t,n){var o=t[0],r=t[1],i=t[2];return e[0]=o*n[0]+r*n[3]+i*n[6],e[1]=o*n[1]+r*n[4]+i*n[7],e[2]=o*n[2]+r*n[5]+i*n[8],e}function F(e,t,n){var o=n[0],r=n[1],i=n[2],s=n[3],a=t[0],c=t[1],u=t[2],l=r*u-i*c,h=i*a-o*u,d=o*c-r*a,_=r*d-i*h,f=i*l-o*d,p=o*h-r*l,m=2*s;return l*=m,h*=m,d*=m,_*=2,f*=2,p*=2,e[0]=a+l+_,e[1]=c+h+f,e[2]=u+d+p,e}function U(e,t,n,o){var r=[],i=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],i[0]=r[0],i[1]=r[1]*Math.cos(o)-r[2]*Math.sin(o),i[2]=r[1]*Math.sin(o)+r[2]*Math.cos(o),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function D(e,t,n,o){var r=[],i=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],i[0]=r[2]*Math.sin(o)+r[0]*Math.cos(o),i[1]=r[1],i[2]=r[2]*Math.cos(o)-r[0]*Math.sin(o),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function B(e,t,n,o){var r=[],i=[];return r[0]=t[0]-n[0],r[1]=t[1]-n[1],r[2]=t[2]-n[2],i[0]=r[0]*Math.cos(o)-r[1]*Math.sin(o),i[1]=r[0]*Math.sin(o)+r[1]*Math.cos(o),i[2]=r[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function z(e,t){var n=e[0],o=e[1],r=e[2],i=t[0],s=t[1],a=t[2],c=Math.sqrt(n*n+o*o+r*r)*Math.sqrt(i*i+s*s+a*a),u=c&&C(e,t)/c;return Math.acos(Math.min(Math.max(u,-1),1))}function V(e){return e[0]=0,e[1]=0,e[2]=0,e}function G(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function X(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function H(e,t){var n=e[0],r=e[1],i=e[2],s=t[0],a=t[1],c=t[2];return Math.abs(n-s)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-a)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-c)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))}var k,Y=h,j=d,W=_,q=T,K=b,Z=s,Q=A,J=(k=r(),function(e,t,n,o,r,i){var s,a;for(t||(t=3),n||(n=0),a=o?Math.min(o*t+n,e.length):e.length,s=n;s<a;s+=t)k[0]=e[s],k[1]=e[s+1],k[2]=e[s+2],r(k,k,i),e[s]=k[0],e[s+1]=k[1],e[s+2]=k[2];return e})},796:(e,t,n)=>{"use strict";n.r(t),n.d(t,{add:()=>u,ceil:()=>_,clone:()=>i,copy:()=>a,create:()=>r,cross:()=>S,dist:()=>G,distance:()=>x,div:()=>V,divide:()=>d,dot:()=>C,equals:()=>U,exactEquals:()=>F,floor:()=>f,forEach:()=>Y,fromValues:()=>s,inverse:()=>R,len:()=>H,length:()=>b,lerp:()=>w,max:()=>m,min:()=>p,mul:()=>z,multiply:()=>h,negate:()=>y,normalize:()=>M,random:()=>L,round:()=>E,scale:()=>v,scaleAndAdd:()=>g,set:()=>c,sqrDist:()=>X,sqrLen:()=>k,squaredDistance:()=>T,squaredLength:()=>A,str:()=>P,sub:()=>B,subtract:()=>l,transformMat4:()=>N,transformQuat:()=>I,zero:()=>O});var o=n(823);function r(){var e=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function i(e){var t=new o.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(e,t,n,r){var i=new o.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function a(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function c(e,t,n,o,r){return e[0]=t,e[1]=n,e[2]=o,e[3]=r,e}function u(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function l(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function h(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function d(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function _(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function f(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function p(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function m(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function E(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function v(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function g(e,t,n,o){return e[0]=t[0]+n[0]*o,e[1]=t[1]+n[1]*o,e[2]=t[2]+n[2]*o,e[3]=t[3]+n[3]*o,e}function x(e,t){var n=t[0]-e[0],o=t[1]-e[1],r=t[2]-e[2],i=t[3]-e[3];return Math.hypot(n,o,r,i)}function T(e,t){var n=t[0]-e[0],o=t[1]-e[1],r=t[2]-e[2],i=t[3]-e[3];return n*n+o*o+r*r+i*i}function b(e){var t=e[0],n=e[1],o=e[2],r=e[3];return Math.hypot(t,n,o,r)}function A(e){var t=e[0],n=e[1],o=e[2],r=e[3];return t*t+n*n+o*o+r*r}function y(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function R(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function M(e,t){var n=t[0],o=t[1],r=t[2],i=t[3],s=n*n+o*o+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=n*s,e[1]=o*s,e[2]=r*s,e[3]=i*s,e}function C(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function S(e,t,n,o){var r=n[0]*o[1]-n[1]*o[0],i=n[0]*o[2]-n[2]*o[0],s=n[0]*o[3]-n[3]*o[0],a=n[1]*o[2]-n[2]*o[1],c=n[1]*o[3]-n[3]*o[1],u=n[2]*o[3]-n[3]*o[2],l=t[0],h=t[1],d=t[2],_=t[3];return e[0]=h*u-d*c+_*a,e[1]=-l*u+d*s-_*i,e[2]=l*c-h*s+_*r,e[3]=-l*a+h*i-d*r,e}function w(e,t,n,o){var r=t[0],i=t[1],s=t[2],a=t[3];return e[0]=r+o*(n[0]-r),e[1]=i+o*(n[1]-i),e[2]=s+o*(n[2]-s),e[3]=a+o*(n[3]-a),e}function L(e,t){var n,r,i,s,a,c;t=t||1;do{a=(n=2*o.RANDOM()-1)*n+(r=2*o.RANDOM()-1)*r}while(a>=1);do{c=(i=2*o.RANDOM()-1)*i+(s=2*o.RANDOM()-1)*s}while(c>=1);var u=Math.sqrt((1-a)/c);return e[0]=t*n,e[1]=t*r,e[2]=t*i*u,e[3]=t*s*u,e}function N(e,t,n){var o=t[0],r=t[1],i=t[2],s=t[3];return e[0]=n[0]*o+n[4]*r+n[8]*i+n[12]*s,e[1]=n[1]*o+n[5]*r+n[9]*i+n[13]*s,e[2]=n[2]*o+n[6]*r+n[10]*i+n[14]*s,e[3]=n[3]*o+n[7]*r+n[11]*i+n[15]*s,e}function I(e,t,n){var o=t[0],r=t[1],i=t[2],s=n[0],a=n[1],c=n[2],u=n[3],l=u*o+a*i-c*r,h=u*r+c*o-s*i,d=u*i+s*r-a*o,_=-s*o-a*r-c*i;return e[0]=l*u+_*-s+h*-c-d*-a,e[1]=h*u+_*-a+d*-s-l*-c,e[2]=d*u+_*-c+l*-a-h*-s,e[3]=t[3],e}function O(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function P(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function F(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function U(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],a=t[0],c=t[1],u=t[2],l=t[3];return Math.abs(n-a)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-c)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-u)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-l)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(l))}var D,B=l,z=h,V=d,G=x,X=T,H=b,k=A,Y=(D=r(),function(e,t,n,o,r,i){var s,a;for(t||(t=4),n||(n=0),a=o?Math.min(o*t+n,e.length):e.length,s=n;s<a;s+=t)D[0]=e[s],D[1]=e[s+1],D[2]=e[s+2],D[3]=e[s+3],r(D,D,i),e[s]=D[0],e[s+1]=D[1],e[s+2]=D[2],e[s+3]=D[3];return e})},228:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()?Object.assign:function(e,r){for(var i,s,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in i=Object(arguments[c]))n.call(i,u)&&(a[u]=i[u]);if(t){s=t(i);for(var l=0;l<s.length;l++)o.call(i,s[l])&&(a[s[l]]=i[s[l]])}}return a}},992:(e,t)=>{"use strict";var n=Object.prototype.hasOwnProperty;function o(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function r(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var o,i,s=[];for(i in"string"!=typeof t&&(t="?"),e)if(n.call(e,i)){if((o=e[i])||null!=o&&!isNaN(o)||(o=""),i=r(i),o=r(o),null===i||null===o)continue;s.push(i+"="+o)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var i=o(t[1]),s=o(t[2]);null===i||null===s||i in r||(r[i]=s)}return r}},63:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},571:function(e){var t;e.exports=((t=function(){function e(e){return r.appendChild(e.dom),e}function n(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";o=e}var o=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(e){e.preventDefault(),n(++o%r.children.length)}),!1);var i=(performance||Date).now(),s=i,a=0,c=e(new t.Panel("FPS","#0ff","#002")),u=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=e(new t.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:r,addPanel:e,showPanel:n,begin:function(){i=(performance||Date).now()},end:function(){a++;var e=(performance||Date).now();if(u.update(e-i,200),e>s+1e3&&(c.update(1e3*a/(e-s),100),s=e,a=0,l)){var t=performance.memory;l.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:r,setMode:n}}).Panel=function(e,t,n){var o=1/0,r=0,i=Math.round,s=i(window.devicePixelRatio||1),a=80*s,c=48*s,u=3*s,l=2*s,h=3*s,d=15*s,_=74*s,f=30*s,p=document.createElement("canvas");p.width=a,p.height=c,p.style.cssText="width:80px;height:48px";var m=p.getContext("2d");return m.font="bold "+9*s+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,a,c),m.fillStyle=t,m.fillText(e,u,l),m.fillRect(h,d,_,f),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(h,d,_,f),{dom:p,update:function(c,E){o=Math.min(o,c),r=Math.max(r,c),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,a,d),m.fillStyle=t,m.fillText(i(c)+" "+e+" ("+i(o)+"-"+i(r)+")",u,l),m.drawImage(p,h+s,d,_-s,f,h,d,_-s,f),m.fillRect(h+_-s,d,s,f),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(h+_-s,d,s,i((1-c/E)*f))}}},t)},160:(e,t,n)=>{"use strict";var o=n(63),r=n(992),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,l=/^[a-zA-Z]:/;function h(e){return(e||"").toString().replace(i,"")}var d=[["#","hash"],["?","query"],function(e,t){return p(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],_={hash:1,query:1};function f(e){var t,o=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},r={},i=typeof(e=e||o);if("blob:"===e.protocol)r=new E(unescape(e.pathname),{});else if("string"===i)for(t in r=new E(e,{}),_)delete r[t];else if("object"===i){for(t in e)t in _||(r[t]=e[t]);void 0===r.slashes&&(r.slashes=a.test(e.href))}return r}function p(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=(e=h(e)).replace(s,""),t=t||{};var n,o=u.exec(e),r=o[1]?o[1].toLowerCase():"",i=!!o[2],a=!!o[3],c=0;return i?a?(n=o[2]+o[3]+o[4],c=o[2].length+o[3].length):(n=o[2]+o[4],c=o[2].length):a?(n=o[3]+o[4],c=o[3].length):n=o[4],"file:"===r?c>=2&&(n=n.slice(2)):p(r)?n=o[4]:r?i&&(n=n.slice(2)):c>=2&&p(t.protocol)&&(n=o[4]),{protocol:r,slashes:i||p(r),slashesCount:c,rest:n}}function E(e,t,n){if(e=(e=h(e)).replace(s,""),!(this instanceof E))return new E(e,t,n);var i,a,c,u,_,v,g=d.slice(),x=typeof t,T=this,b=0;for("object"!==x&&"string"!==x&&(n=t,t=null),n&&"function"!=typeof n&&(n=r.parse),i=!(a=m(e||"",t=f(t))).protocol&&!a.slashes,T.slashes=a.slashes||i&&t.slashes,T.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||l.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!p(T.protocol)))&&(g[3]=[/(.*)/,"pathname"]);b<g.length;b++)"function"!=typeof(u=g[b])?(c=u[0],v=u[1],c!=c?T[v]=e:"string"==typeof c?~(_="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof u[2]?(T[v]=e.slice(0,_),e=e.slice(_+u[2])):(T[v]=e.slice(_),e=e.slice(0,_))):(_=c.exec(e))&&(T[v]=_[1],e=e.slice(0,_.index)),T[v]=T[v]||i&&u[3]&&t[v]||"",u[4]&&(T[v]=T[v].toLowerCase())):e=u(e,T);n&&(T.query=n(T.query)),i&&t.slashes&&"/"!==T.pathname.charAt(0)&&(""!==T.pathname||""!==t.pathname)&&(T.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),o=n.length,r=n[o-1],i=!1,s=0;o--;)"."===n[o]?n.splice(o,1):".."===n[o]?(n.splice(o,1),s++):s&&(0===o&&(i=!0),n.splice(o,1),s--);return i&&n.unshift(""),"."!==r&&".."!==r||n.push(""),n.join("/")}(T.pathname,t.pathname)),"/"!==T.pathname.charAt(0)&&p(T.protocol)&&(T.pathname="/"+T.pathname),o(T.port,T.protocol)||(T.host=T.hostname,T.port=""),T.username=T.password="",T.auth&&(~(_=T.auth.indexOf(":"))?(T.username=T.auth.slice(0,_),T.username=encodeURIComponent(decodeURIComponent(T.username)),T.password=T.auth.slice(_+1),T.password=encodeURIComponent(decodeURIComponent(T.password))):T.username=encodeURIComponent(decodeURIComponent(T.auth)),T.auth=T.password?T.username+":"+T.password:T.username),T.origin="file:"!==T.protocol&&p(T.protocol)&&T.host?T.protocol+"//"+T.host:"null",T.href=T.toString()}E.prototype={set:function(e,t,n){var i=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||r.parse)(t)),i[e]=t;break;case"port":i[e]=t,o(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,c.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";i[e]=t.charAt(0)!==s?s+t:t}else i[e]=t;break;case"username":case"password":i[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(i.username=t.slice(0,a),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=t.slice(a+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(t))}for(var u=0;u<d.length;u++){var l=d[u];l[4]&&(i[l[1]]=i[l[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&p(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(e){e&&"function"==typeof e||(e=r.stringify);var t,n=this,o=n.host,i=n.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var s=i+(n.protocol&&n.slashes||p(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):"file:"!==n.protocol&&p(n.protocol)&&!o&&"/"!==n.pathname&&(s+="@"),(":"===o[o.length-1]||c.test(n.hostname)&&!n.port)&&(o+=":"),s+=o+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},E.extractProtocol=m,E.location=f,E.trimLeft=h,E.qs=r,e.exports=E},470:()=>{Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,o){return Array.isArray(o)?n.push.apply(n,e.call(o,t-1)):n.push(o),n}),[]):Array.prototype.slice.call(this)},writable:!0})}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(7),t=n.n(e),o=n(228),r=n.n(o),i=n(823);function s(e,t){const n=e.getExtension(t);if(!n)return!1;const o=t.split("_")[0],r=new RegExp(`${o}$`);for(const t in n)if("function"==typeof n[t]){const o=t.replace(r,"");t.substring&&(e[o]=n[t].bind(n))}return!0}const a=["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_element_index_uint","EXT_texture_filter_anisotropic","EXT_color_buffer_half_float","OES_vertex_array_object","WEBGL_depth_texture","ANGLE_instanced_arrays","WEBGL_color_buffer_float","WEBGL_draw_buffers","EXT_color_buffer_float"],c=(()=>{let e=!1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e=!0),e})(),u=(e,t)=>{if("number"==typeof e)return i.equals(e,t);if(e.length!==t.length)return!1;let n=!0;return e.forEach(((e,o)=>{n=i.equals(e,t[o])&&n})),n},l={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,RED:6403,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HALF_FLOAT:36193,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0,R8:33321},h={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6403:"RED",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33321:"R8",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36193:"HALF_FLOAT",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"},d={alpha:!1,depth:!0,premultipliedAlpha:!1};var _=n(684),f=n(409);let p=0;function m(){let e,t,n=[0,0,0,0],o=0,i=0,m=0,v=(()=>{const e=document.createElement("canvas");return!(!e.getContext("experimental-webgl2")&&!e.getContext("webgl2"))})(),g=c;const x=_.create(),T=_.create(),b=_.create(),A=f.create(),y=_.create(),R=f.create();this.id="WebGLContext"+p++,this.canvas,this.gl,this.CONTEXT_LOST="contextLost",this.CONTEXT_RESTORED="contextRestored",this.shaderCount=0,this.bufferCount=0,this.textureCount=0,this.frameBufferCount=0,this.maxAnisotropy=0,this.multiRenderTargetSupport=!1,this.maxMultiRenderTargets=0,this.init=function(e,t={}){const n=r()({},d,t);if(void 0!==e){if(e instanceof HTMLCanvasElement){this.canvas=e;let o=v?"webgl2":"webgl";t.webgl1&&(o="webgl",v=!1),this.gl=e.getContext(o,n)}else window.WebGL2RenderingContext&&e instanceof WebGL2RenderingContext?(v=!0,this.gl=e,this.canvas=e.canvas):e instanceof WebGLRenderingContext?(v=!1,this.gl=e,this.canvas=e.canvas):console.error("The source has to be one of the following : Canvas, WebGLRenderingContext or WebGL2RenderingContext");this.canvas.addEventListener("webglcontextlost",C),this.canvas.addEventListener("webglcontextrestored",S),this.extensions=(e=>{const{gl:t}=e,n=window.WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,o={};a.forEach((e=>{o[e]=t.getExtension(e)})),n||(o.OES_vertex_array_object||console.error("OES_vertex_array_object extension is not supported"),s(t,"OES_vertex_array_object"),s(t,"ANGLE_instanced_arrays"),s(t,"WEBGL_draw_buffers"));const r=o.EXT_texture_filter_anisotropic;if(r&&(e.maxAnisotropy=t.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),e.multiRenderTargetSupport=!!e.gl.drawBuffers,e.multiRenderTargetSupport){const n=e.gl.MAX_DRAW_BUFFERS||o.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL;e.maxMultiRenderTargets=t.getParameter(n)}return o})(this),(e=>{for(const t in l)e[t]?console.log("already exist : ",t):e[t]=l[t];if(e.webgl2){const t=/^[^a-z]*$/;for(const n in e.gl)t.test(n)&&-1===n.indexOf("FLOAT")&&(e[n]=e.gl[n],l[n]=e.gl[n],h[e[n]]=n)}})(this),this.setSize(this.canvas.width,this.canvas.height),this.enable(this.BLEND),this.enableAlphaBlending(),this.enable(this.DEPTH_TEST),this.enable(this.CULL_FACE),this.cullFace(E.BACK)}else{const e=document.createElement("canvas");this.init(e,n)}},this.clear=function(e=0,t=0,n=0,o=0){const{gl:r}=this;r.clearColor(e,t,n,o),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},this.setSize=function(e,t){i=Math.floor(e),m=Math.floor(t),this.canvas.width=i,this.canvas.height=m,o=i/m,this.viewport(0,0,i,m)},this.viewport=function(e,t,o,r){u(n,[e,t,o,r])||(n=[e,t,o,r],this.gl.viewport(e,t,o,r))},this.scissor=function(e,t,n,o){this.gl.scissor(e,t,n,o)},this.getViewport=function(){return n},this.getAspectRatio=function(){return o},this.enable=function(e){this.gl.enable(e)},this.disable=function(e){this.gl.disable(e)},this.cullFace=function(e){this.gl.cullFace(e)},this.enableAlphaBlending=function(){const{gl:e}=this;e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA)},this.enableAdditiveBlending=function(){const{gl:e}=this;e.blendFunc(e.ONE,e.ONE)},this.setMatrices=function(e){t=e,this.setModelMatrix(T)},this.setModelMatrix=function(e){_.copy(b,e),void 0!==t&&(_.multiply(x,t.viewMatrix,b),f.fromMat4(A,x),f.invert(A,A),f.transpose(A,A),f.fromMat4(R,x),f.invert(R,R),_.invert(y,t.viewMatrix))},this.useShader=function(t){e=t,this.shaderProgram=t.shaderProgram,this.gl.useProgram(this.shaderProgram)},this.draw=function(t){if(t.length)return void t.forEach((e=>this.draw(e)));M(),e.updateUniforms(),t.bind(this);const{drawType:n}=t,{gl:o}=this;t.isInstanced?o.drawElementsInstanced(t.drawType,t.numItems,o.UNSIGNED_INT,0,t.numInstance):n===o.POINTS?o.drawArrays(n,0,t.vertexSize):o.drawElements(n,t.numItems,o.UNSIGNED_INT,0),t.unbind()},this.getCamera=function(){return t},this.destroy=function(e=!0){this.gl.getExtension("WEBGL_lose_context").loseContext(),e&&void 0!==this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)},this.__defineGetter__("width",(function(){return i})),this.__defineGetter__("height",(function(){return m})),this.__defineGetter__("webgl2",(function(){return v})),this.__defineGetter__("isMobile",(function(){return g})),this.__defineGetter__("aspectRatio",(function(){return o}));const M=()=>{void 0!==t&&(e.uniform("uProjectionMatrix","mat4",t.projectionMatrix),e.uniform("uViewMatrix","mat4",t.viewMatrix),e.uniform("uNormalMatrix","mat3",A),e.uniform("uModelViewMatrixInverse","mat3",R)),e.uniform("uModelMatrix","mat4",b)},C=()=>{this.emit(this.CONTEXT_LOST)},S=()=>{this.emit(this.CONTEXT_RESTORED)}}m.prototype=Object.assign(Object.create(t().prototype),{constructor:m});const E=new m,v={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",ivec2:"uniform2i",ivec3:"uniform3i",ivec4:"uniform4i",mat2:"uniformMatrix2fv",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},g=e=>"number"==typeof e?e:e.slice?e.slice(0):new Float32Array(e),x=e=>"object"==typeof e?function(e){return 9===e.length?"mat3":16===e.length?"mat4":`vec${e.length}`}(e):"float";function T(e,t){let n;this.vertexShader=e||"// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}",this.fragmentShader=t||"precision highp float;\n#define GLSLIFY 1\n// varying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_FragColor = vec4(1.0);\n}",this.shaderProgram;let o={};this.bind=function(e){if(void 0===e||void 0===n||e===n){if(n=e||E,!this.shaderProgram){const e=r(this.vertexShader,!0),t=r(this.fragmentShader,!1);i(e,t)}n.useShader(this)}else console.error("this shader has been bind to a different WebGL Rendering Context",n.id)},this.uniform=function(e,t,n){let r,i;void 0===n?(i=x(t),r=t):(i=t,r=n);const s=v[i];if(o[e]){const t=o[e];u(t.value,r)||(t.value=g(r),t.changed=!0)}else o[e]={type:i,uniformType:s,value:g(r),changed:!0};return this},this.updateUniforms=function(){if(!n)return void console.warn("No WebGL Context has been set yet, please call shader.bind() first");const{gl:e}=n;for(let t in o){const n=o[t];if(n.changed){const o=t;n.uniformLoc||(n.uniformLoc=e.getUniformLocation(this.shaderProgram,o));const{uniformLoc:r,uniformType:i,value:s}=n;null!==r&&(-1===i.indexOf("Matrix")?e[i](r,s):e[i](r,!1,s)),n.changed=!1}}},this.destroy=function(){const{gl:e}=n;e.deleteProgram(this.shaderProgram),n.shaderCount--};const r=(e,t)=>{const{gl:o}=n,r=t?n.VERTEX_SHADER:n.FRAGMENT_SHADER,i=o.createShader(r);return o.shaderSource(i,e),o.compileShader(i),o.getShaderParameter(i,o.COMPILE_STATUS)?i:(console.warn("Error in Shader : ",o.getShaderInfoLog(i)),console.log((e=>{const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=`${e+1}: ${t[e]}`;return t.join("\n")})(e)),null)},i=(e,t)=>{const{gl:o}=n;this.shaderProgram=o.createProgram(),o.attachShader(this.shaderProgram,e),o.attachShader(this.shaderProgram,t),o.deleteShader(e),o.deleteShader(t),o.linkProgram(this.shaderProgram),n.shaderCount++}}function b(e=l.TRIANGLES){this.drawType=e,this.numItems=0;let t,n,o,r,i,s=[],a=[],c=[],u=!0,h=!1,d=0;this.bufferData=function(e,t,n,o=l.STATIC_DRAW,r=!1){let i,s=[];if("number"==typeof e[0]){if(i=e,void 0===n)return console.error("Missing element size for flatten data :",t),this;for(let e=0;e<i.length;e+=n){const t=[];for(let o=0;o<n;o++)t.push(i[e+o]);s.push(t)}}else s=e,i=(e=>{if(e[0]instanceof Float32Array){const t=e.reduce(((e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n]);return e}),[]);return t}return e.flat()})(e);const a=void 0===n?e[0].length:n;return _(i,e,t,a,o,r)},this.bufferInstance=function(e,t){const n=e[0].length;return d=e.length,this.bufferData(e,t,n,l.STATIC_DRAW,!0)},this.bufferVertex=function(e,t=l.STATIC_DRAW){return this.bufferData(e,"aVertexPosition",3,t)},this.bufferTexCoord=function(e,t=l.STATIC_DRAW){return this.bufferData(e,"aTextureCoord",2,t)},this.bufferNormal=function(e,t=l.STATIC_DRAW){return this.bufferData(e,"aNormal",3,t)},this.bufferIndex=function(e,t=l.STATIC_DRAW){return n=t,o=new Uint32Array(e),this.numItems=o.length,u=!0,this},this.bind=function(e){if(void 0!==e&&void 0!==i&&e!==i)return void console.error("this mesh has been bind to a different WebGL Rendering Context");i=e||GL;const{gl:n}=i;f(),n.bindVertexArray(t),this.vertexSize=this.getSource("aVertexPosition").length},this.unbind=function(){},this.getAttribute=function(e){return s.find((t=>t.name===e))},this.getAttributes=function(){return s},this.getSource=function(e){const t=this.getAttribute(e);return t?t.source:[]},this.generateFaces=function(){let e,t,n,r,i,s;c=[];const{vertices:a}=this;for(let u=0;u<o.length;u+=3){e=o[u],t=o[u+1],n=o[u+2],r=a[e],i=a[t],s=a[n];const l={indices:[e,t,n],vertices:[r,i,s]};c.push(l)}},this.destroy=function(){const{gl:e}=i;s.forEach((t=>{e.deleteBuffer(t.buffer),t.source=[],t.dataArray=[],i.bufferCount--})),r&&(e.deleteBuffer(r),i.bufferCount--),e.deleteVertexArray(t),s=[],o=[],a=[]},this.__defineGetter__("vertices",(function(){return this.getSource("aVertexPosition")})),this.__defineGetter__("coords",(function(){return this.getSource("aTextureCoord")})),this.__defineGetter__("normal",(function(){return this.getSource("aNormal")})),this.__defineGetter__("indices",(function(){return o})),this.__defineGetter__("faces",(function(){return c})),this.__defineGetter__("isInstanced",(function(){return h})),this.__defineGetter__("numInstance",(function(){return d}));const _=(e,t,n,o,r=l.STATIC_DRAW,i=!1)=>{const c=r;h=i||h;const u=new Float32Array(e),d=this.getAttribute(n);return d?(d.itemSize=o,d.dataArray=u,d.source=t):s.push({name:n,source:t,itemSize:o,usage:c,dataArray:u,isInstanced:i}),a.push(n),this},f=()=>{const{shaderProgram:e,gl:n}=i;0!=a.length&&(t||(t=n.createVertexArray()),n.bindVertexArray(t),s.forEach((t=>{if(-1!==a.indexOf(t.name)){const o=function(e,t){let n;const{gl:o}=t;return void 0!==e.buffer?n=e.buffer:(n=o.createBuffer(),e.buffer=n,t.bufferCount++),n}(t,i);n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,t.dataArray,t.usage);const r=((e,t,n)=>(void 0===t.cacheAttribLoc&&(t.cacheAttribLoc={}),void 0===t.cacheAttribLoc[n]&&(t.cacheAttribLoc[n]=e.getAttribLocation(t,n)),t.cacheAttribLoc[n]))(n,e,t.name);r>=0&&(n.enableVertexAttribArray(r),n.vertexAttribPointer(r,t.itemSize,n.FLOAT,!1,0,0)),t.attrPosition=r,t.isInstanced&&n.vertexAttribDivisor(r,1)}})),p(),n.bindVertexArray(null),u=!1,a=[])},p=()=>{const{gl:e}=i;u&&(r||(r=e.createBuffer(),i.bufferCount++),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r),e.bufferData(e.ELEMENT_ARRAY_BUFFER,o,n))}}const A=e=>0!==e&&!(e&e-1);class y{constructor(e){this._value=e}set(e,t=1){this._value=this._value,this._value=0===t?this._value&0<<e:this._value|1<<e}get(e){let t=this._value&1<<e;return t>>=e,1===t}reset(e){this._value=e}get value(){return this._value}}const R="This browser doesn't support multi render targets : WEBGL_draw_buffers",M="This framebuffer has been bind to a different WebGL Rendering Context",C="This texture has been bind to a different WebGL Rendering Context",S=(e,t="")=>{console.error(e,t)};class w{constructor(e,t={},n=0,o=0){this._source=e,this._isHtmlElement=(e=>e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)(this._source),(this._isHtmlElement||!e||((e,t)=>{let n=!0;return"Array"===e.constructor.name&&(console.error("Please convert texture source to Unit8Array or Float32Array"),n=!1),void 0===t.type&&"Uint8Array"!==e.constructor.name&&console.error("Using none Unit8Array, pleaes specify type in the texture parameters"),n})(e,t))&&(this._getDimension(e,n,o),this._params=function(e,t,n){if(!e.minFilter){let o=l.LINEAR;t&&t&&A(t)&&A(n)&&(o=l.NEAREST_MIPMAP_LINEAR),e.minFilter=o}return e.mipmap=void 0===e.mipmap||e.mipmap,e.magFilter=e.magFilter||l.LINEAR,e.wrapS=e.wrapS||l.CLAMP_TO_EDGE,e.wrapT=e.wrapT||l.CLAMP_TO_EDGE,e.internalFormat=e.internalFormat||l.RGBA,e.format=e.format||l.RGBA,e.premultiplyAlpha=void 0!==e.premultiplyAlpha&&e.premultiplyAlpha,e.level=e.level||0,e.type=e.type||l.UNSIGNED_BYTE,e}(t,this._width,this._height),this._checkMipmap(),this._parametersState=new y(0))}bind(e,t){if(void 0!==t&&void 0!==this.GL&&t!==this.GL)return void S(C,this.GL.id);this.GL=t||E;const{gl:n}=this.GL;this.createTexture(this.GL),n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,this._texture),this._checkParameters()}createTexture(e){void 0===e||void 0===this.GL||e===this.GL?(this.GL=e||E,this._texture||(((e,t)=>{e.webgl2&&(t.type===l.HALF_FLOAT?(t.type=e.gl.HALF_FLOAT,t.internalFormat=l.RGBA16F):t.type===l.FLOAT&&(t.internalFormat=l.RGBA32F))})(this.GL,this._params),this._uploadTexture())):S(C,this.GL.id)}updateTexture(e){this._source=e,this._uploadTexture()}generateMipmap(){if(!this._generateMipmap)return;const{gl:e}=this.GL;e.bindTexture(e.TEXTURE_2D,this._texture),e.generateMipmap(e.TEXTURE_2D)}destroy(){const{gl:e}=this.GL;e.deleteTexture(this._texture),this.GL.textureCount--}showProperties(){console.log("Dimension :",this._width,this._height);for(const e in this._params)console.log(e,h[this._params[e]]||this._params[e])}_uploadTexture(){const{gl:e}=this.GL;this._texture||(this._texture=e.createTexture(),this.GL.textureCount++),e.bindTexture(e.TEXTURE_2D,this._texture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!0),this._isHtmlElement&&!this.GL.webgl2?e.texImage2D(e.TEXTURE_2D,0,this._params.internalFormat,this._params.format,this._params.type,this._source):e.texImage2D(e.TEXTURE_2D,0,this._params.internalFormat,this._width,this._height,0,this._params.format,this._params.type,this._source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,this._params.magFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this._params.minFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,this._params.wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,this._params.wrapT),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),this._generateMipmap&&e.generateMipmap(e.TEXTURE_2D)}_checkParameters(){const{gl:e}=this.GL;this._parametersState.value>0&&(this._parametersState.get(0)?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this._params.minFilter):this._parametersState.get(1)?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,this._params.magFilter):this._parametersState.get(2)?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,this._params.wrapS):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,this._params.wrapT)),this._parametersState.reset(0)}_getDimension(e,t,n){e?(this._width=e.width||e.videoWidth,this._height=e.height||e.videoWidth,this._width=this._width||t,this._height=this._height||n,this._width&&this._height||(this._width=this._height=Math.sqrt(e.length/4))):(this._width=t,this._height=n)}_checkMipmap(){this._generateMipmap=this._params.mipmap,A(this._width)&&A(this._height)||(this._generateMipmap=!1),-1===h[this._params.minFilter].indexOf("MIPMAP")&&(this._generateMipmap=!1)}get texture(){return this._texture}set minFilter(e){this._params.minFilter=e,this._parametersState.set(0,1)}get minFilter(){return this._params.minFilter}set magFilter(e){this._params.magFilter=e,this._parametersState.set(1,1)}get magFilter(){return this._params.magFilter}set wrapS(e){this._params.wrapS=e,this._parametersState.set(2,1)}get wrapS(){return this._params.wrapS}set wrapT(e){this._params.wrapT=e,this._parametersState.set(3,1)}get wrapT(){return this._params.wrapT}get width(){return this._width}get height(){return this._height}}function L(e,t,n={},o=1){let r,i;const s=e,a=t,c=n,u=o,h=[];let d;this.bind=function(e,t=!0){if(void 0!==e&&void 0!==r&&e!==r)return void S(M,r.id);r=e||E;const{gl:n}=r;u>1&&!r.multiRenderTargetSupport&&S(R,r.id),i||_(),t&&r.viewport(0,0,s,a),n.bindFramebuffer(n.FRAMEBUFFER,i)},this.unbind=function(e=!0){e&&r.viewport(0,0,r.width,r.height);const{gl:t}=r;t.bindFramebuffer(t.FRAMEBUFFER,null),h.forEach((e=>{e.generateMipmap()}))},this.getTexture=function(e=0){return h[e]},this.destroy=function(){const{gl:e}=r;h.forEach((e=>e.destroy())),d.destroy(),e.deleteFramebuffer(i),r.frameBufferCount--};const _=()=>{f();const{gl:e}=r;i=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,i),r.frameBufferCount++;const t=r.webgl2?e.DRAW_FRAMEBUFFER:e.FRAMEBUFFER,n=[];for(let o=0;o<u;o++)e.framebufferTexture2D(t,e.COLOR_ATTACHMENT0+o,e.TEXTURE_2D,h[o].texture,0),n.push(l[`COLOR_ATTACHMENT${o}`]);r.multiRenderTargetSupport&&e.drawBuffers(n),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,d.texture,0),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null)},f=()=>{for(let e=0;e<u;e++)h.push(p());const{gl:e}=r,t=r.webgl2?e.DEPTH_COMPONENT16:e.DEPTH_COMPONENT;d=p(t,l.UNSIGNED_INT,l.DEPTH_COMPONENT,{minFilter:l.NEAREST,magFilter:l.NEAREST,mipmap:!1})},p=(e,t,n,o={})=>{const i=Object.assign({},c);n||(n=e),i.internalFormat=e||l.RGBA,i.format=n||l.RGBA,i.type=t||i.type,Object.assign(i,o);const u=new w(null,i,s,a);return u.createTexture(r),u};this.__defineGetter__("texture",(function(){return h[0]})),this.__defineGetter__("depthTexture",(function(){return d})),this.__defineGetter__("width",(function(){return s})),this.__defineGetter__("height",(function(){return a}))}var N=n(329);class I{constructor(){this._mtxView=_.create(),this._mtxProj=_.create(),this._near=0,this._far=0,this._lookDir=N.create()}lookAt(e,t,n=[0,1,0]){_.lookAt(this._mtxView,e,t,n)}setFromViewProjection(e,t){_.copy(this._mtxView,e),_.copy(this._mtxProj,t)}setViewMatrix(e){_.copy(this._mtxView,e)}setProjectionMatrix(e){_.copy(this._mtxProj,e)}_updateMatrices(){}get viewMatrix(){return this._mtxView}get view(){return this._mtxView}get projectionMatrix(){return this._mtxProj}get projection(){return this._mtxProj}get position(){const e=_.create();return _.invert(e,this._mtxView),[e[12],e[13],e[14]]}get direction(){const e=f.create();return f.fromMat4(e,this._mtxView),f.transpose(e,e),N.transformMat3(this._lookDir,[0,0,-1],e),N.normalize(this._lookDir,this._lookDir),this._lookDir}set near(e){this._near=e,this._updateMatrices()}get near(){return this._near}set far(e){this._far=e,this._updateMatrices()}get far(){return this._far}}function O(e,t){this.origin=e,this.direction=t;const n=N.create(),o=N.create(),r=N.create(),i=N.create(),s=N.create(),a=N.create(),c=N.create(),u=N.create();this.at=function(e){return N.copy(i,this.direction),N.scale(i,i,e),N.add(i,i,this.origin),i},this.lookAt=function(e){N.sub(this.direction,e,this.origin),N.normalize(this.origin,this.origin)},this.closestPointToPoint=function(e){const t=N.create();N.sub(e,this.origin);const n=N.dot(t,this.direction);return n<0?N.clone(this.origin):(N.copy(t,this.direction),N.scale(t,t,n),N.add(t,t,this.origin),t)},this.distanceToPoint=function(e){return Math.sqrt(this.distanceSqToPoint(e))},this.distanceSqToPoint=function(e){const t=N.create();N.sub(t,e,this.origin);const n=N.dot(t,this.direction);return n<0?N.squaredDistance(this.origin,e):(N.copy(t,this.direction),N.scale(t,t,n),N.add(t,t,this.origin),N.squaredDistance(t,e))},this.intersectsSphere=function(e,t){return this.distanceToPoint(e)<=t},this.intersectSphere=function(e,t){const n=N.create();N.sub(n,e,this.origin);const o=N.dot(n,this.direction),r=N.dot(n,n)-o*o,i=t*t;if(r>i)return null;const s=Math.sqrt(i-r),a=o-s,c=o+s;return a<0&&c<0?null:a<0?this.at(c):this.at(a)},this.intersectTriangle=function(e,t,i,l=!0){N.copy(n,e),N.copy(o,t),N.copy(r,i),N.sub(s,o,n),N.sub(a,r,n),N.cross(c,s,a);let h,d=N.dot(this.direction,c);if(d>0){if(l)return null;h=1}else{if(!(d<0))return null;h=-1,d=-d}N.sub(u,this.origin,n),N.cross(a,u,a);const _=h*N.dot(this.direction,a);if(_<0)return null;N.cross(s,s,u);const f=h*N.dot(this.direction,s);if(f<0)return null;if(_+f>d)return null;const p=-h*N.dot(u,c);return p<0?null:this.at(p/d)}}class P extends I{constructor(e,t,n,o){super(),this._fov=0,this._ratio=0,this.setPerspective(e,t,n,o)}setPerspective(e,t,n,o){_.perspective(this._mtxProj,e,t,n,o),this._near=n,this._far=o,this._fov=e,this._ratio=t}setAspectRatio(e){this._ratio=e,this._updateMatrices()}generateRay(e,t){const n=_.create(),o=N.create(),r=this._mtxProj,i=this._mtxView;return _.multiply(n,r,i),_.invert(n,n),N.transformMat4(o,e,n),N.sub(o,o,this.position),N.normalize(o,o),t?(t.origin=this.position,t.direction=o):t=new O(this.position,o),t}_updateMatrices(){this.setPerspective(this._fov,this._ratio,this._near,this._far)}}class F{constructor(e){return this._GL=e||E,this._uniforms={},this._uniformTextures=[],this._fbo,this._clearColor={r:0,g:0,b:0,a:0},this}setClearColor(e=0,t=0,n=0,o=0){return this._clearColor.r=e,this._clearColor.g=t,this._clearColor.b=n,this._clearColor.a=o,this}useProgram(e,t){return this._shader=e instanceof T?e:new T(e,t),this}setMesh(e){return this._mesh=e,this}createMesh(e){return this._mesh=new b(e),this}bufferVertex(e){return this._mesh||(this._mesh=new b),this._mesh.bufferVertex(e),this}bufferTexCoord(e){return this._mesh||(this._mesh=new b),this._mesh.bufferTexCoord(e),this}bufferNormal(e){return this._mesh||(this._mesh=new b),this._mesh.bufferNormal(e),this}bufferIndex(e){return this._mesh||(this._mesh=new b),this._mesh.bufferIndex(e),this}bufferInstance(e,t){return this._mesh?(this._mesh.bufferInstance(e,t),this):(console.warn("Need to create mesh first"),this)}bufferData(e,t){return this._mesh||(this._mesh=new b),this._mesh.bufferData(e,t),this}uniform(e,t,n){const o=e;let r,i;return void 0===n?(i=x(t),r=t):(i=t,r=n),this._uniforms[o]={type:i,value:r},this}uniformTexture(e,t,n){return this.bindTexture(e,t,n)}bindTexture(e,t,n){return void 0!==n?this._uniformTextures[n]={name:e,texture:t}:this._uniformTextures.push({name:e,texture:t}),this}bindFrameBuffer(e){return this._fbo=e,this}draw(){if(this._shader){if(this._mesh){if(this._fbo){const{r:e,g:t,b:n,a:o}=this._clearColor;this._fbo.bind(this._GL),this._GL.clear(e,t,n,o)}this._shader.bind(this._GL);for(const e in this._uniforms){const t=this._uniforms[e];this._shader.uniform(e,t.type,t.value)}return this._uniformTextures.forEach(((e,t)=>{void 0!==e&&(this._shader.uniform(e.name,"int",t),e.texture.bind(t,this._GL))})),this._GL.draw(this._mesh),this._fbo&&this._fbo.unbind(),this}console.warn("No Mesh assigned for draw call")}else console.warn("No GLShader assigned for draw call")}get shader(){return this._shader}get framebuffer(){return this._fbo}}class U extends F{constructor(e){super(e);const t=this._GL,n=1e3,o=[[-n,0,0],[n,0,0],[0,-n,0],[0,n,0],[0,0,-n],[0,0,n]];this.createMesh(t.LINES).bufferVertex(o).bufferData([[1,0,0],[1,0,0],[0,1,0],[0,1,0],[0,0,1],[0,0,1]],"aColor").bufferIndex([0,1,2,3,4,5]).useProgram("precision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aColor;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vColor;\n\nvoid main(void) {\n  gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n  vColor = aColor;\n}","precision highp float;\n#define GLSLIFY 1\nvarying vec3 vColor;\nuniform float uOpacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(vColor, uOpacity);\n}"),this.opacity=.75}draw(){this.uniform("uOpacity",this.opacity),super.draw()}}const D=()=>(new b).bufferData([[-1,-1],[-1,4],[4,-1]],"aPosition",2).bufferIndex([2,1,0]);class B extends F{constructor(e){super(e),this.setMesh(((e,t,n=!1)=>{const o=[],r=[],i=[],s=[],a=1/t;let c=0;function u(n,o,r=!1){const i=n/t*Math.PI-.5*Math.PI,s=o/t*Math.PI*2,a=r?1:e,c=[];c[1]=Math.sin(i)*a;const u=Math.cos(i)*a;c[0]=Math.cos(s)*u,c[2]=Math.sin(s)*u;const l=1e4;return c[0]=Math.floor(c[0]*l)/l,c[1]=Math.floor(c[1]*l)/l,c[2]=Math.floor(c[2]*l)/l,c}for(let e=0;e<t;e++)for(let n=0;n<t;n++){o.push(u(e,n)),o.push(u(e+1,n)),o.push(u(e+1,n+1)),o.push(u(e,n+1)),s.push(u(e,n,!0)),s.push(u(e+1,n,!0)),s.push(u(e+1,n+1,!0)),s.push(u(e,n+1,!0));const l=n/t,h=e/t;r.push([1-l,h]),r.push([1-l,h+a]),r.push([1-l-a,h+a]),r.push([1-l-a,h]),i.push(4*c+0),i.push(4*c+1),i.push(4*c+2),i.push(4*c+0),i.push(4*c+2),i.push(4*c+3),c++}return n&&i.reverse(),(new b).bufferVertex(o).bufferTexCoord(r).bufferIndex(i).bufferNormal(s)})(1,12)).useProgram("// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec3 uTranslate;\nuniform vec3 uScale;\nuniform vec3 uRotation;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, s, -s, c);\n\treturn m * v;\n}\n\nvoid main(void) {\n  vec3 pos = aVertexPosition * uScale;\n  pos.yz = rotate(pos.yz, uRotation.x);\n  pos.xz = rotate(pos.xz, uRotation.y);\n  pos.xy = rotate(pos.xy, uRotation.z);\n  pos += uTranslate;\n\n  gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n  vTextureCoord = aTextureCoord;\n  vNormal = aNormal;\n}","precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 uColor;\nuniform float uOpacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(uColor, uOpacity);\n}").uniform("uRotation",[0,0,0])}draw(e,t=[1,1,1],n=[1,1,1],o=1){this.uniform("uTranslate",e).uniform("uScale",t).uniform("uColor",n).uniform("uOpacity",o),super.draw(0)}}class z extends F{constructor(e){super(e),this.setMesh(D()).useProgram("// bigTriangle.vert\n\n#define SHADER_NAME BIG_TRIANGLE_VERTEX\n\nprecision mediump float;\n#define GLSLIFY 1\nattribute vec2 aPosition;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTextureCoord = aPosition * .5 + .5;\n}","// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n}")}draw(e){this.bindTexture("texture",e,0),super.draw(0)}}const{mat4:V,vec4:G}=n(503);var X=n(221);function H(){let e=N.create(),t=N.create(),n=N.fromValues(1,1,1),o=_.create(),r=_.create(),i=_.create(),s=_.create(),a=_.create(),c=_.create(),u=X.create(),l=[],h=!0;this.update=function(e){void 0!==e&&_.copy(r,e),h=!0,d()},this.addChild=function(e){l.push(e)},this.removeChild=function(e){const t=l.indexOf(e);-1!=t?l.splice(t,1):console.warn("Child no exist")},this.setRotationFromQuaternion=function(e){X.copy(u,e),h=!0};const d=()=>{h&&(_.identity(i,i),_.identity(a,a),_.identity(s,s),_.rotateX(s,s,t[0]),_.rotateY(s,s,t[1]),_.rotateZ(s,s,t[2]),_.fromQuat(c,u),_.mul(s,c,s),_.scale(a,a,n),_.translate(i,i,e),_.mul(o,i,s),_.mul(o,o,a),_.mul(o,r,o),l.forEach((e=>{e.update(o)})),h=!1)};this.__defineGetter__("matrix",(function(){return d(),o})),this.__defineSetter__("x",(function(t){e[0]=t,h=!0})),this.__defineGetter__("x",(function(){return e[0]})),this.__defineSetter__("y",(function(t){e[1]=t,h=!0})),this.__defineGetter__("y",(function(){return e[1]})),this.__defineSetter__("z",(function(t){e[2]=t,h=!0})),this.__defineGetter__("z",(function(){return e[2]})),this.__defineSetter__("scaleX",(function(e){n[0]=e,h=!0})),this.__defineGetter__("scaleX",(function(){return n[0]})),this.__defineSetter__("scaleY",(function(e){n[1]=e,h=!0})),this.__defineGetter__("scaleY",(function(){return n[1]})),this.__defineSetter__("scaleZ",(function(e){n[2]=e,h=!0})),this.__defineGetter__("scaleZ",(function(){return n[2]})),this.__defineSetter__("rotationX",(function(e){t[0]=e,h=!0})),this.__defineGetter__("rotationX",(function(){return t[0]})),this.__defineSetter__("rotationY",(function(e){t[1]=e,h=!0})),this.__defineGetter__("rotationY",(function(){return t[1]})),this.__defineSetter__("rotationZ",(function(e){t[2]=e,h=!0})),this.__defineGetter__("rotationZ",(function(){return t[2]})),this.__defineGetter__("children",(function(){return l}))}class k{constructor(e,t,n,o={},r=1){this._fbos=[];for(let i=0;i<e;i++){const e=new L(t,n,o,r);this._fbos.push(e)}}swap(){const e=this._fbos.shift();this._fbos.push(e)}get read(){return this._fbos[this._fbos.length-1]}get write(){return this._fbos[0]}get all(){return this._fbos}}class Y extends k{constructor(e,t,n={},o=1){super(2,e,t,n,o)}}let j=window,W=60,q=performance.now(),K=0,Z=0,Q=q;const J=[],$=[],ee=[],te=[];let ne=[],oe=[],re=-1,ie=0;function se(){!function(){let e,t=0,n=1e3/W,o=0;for(t=0;t<J.length;t++)e=J[t],null!=e&&e.func(e.args);for(;ne.length>0;)e=ne.pop(),e.func(e.args);let r=performance.now();for(Z=(r-q)/1e3,K=r-Q,t=0;t<$.length;t++)e=$[t],r-e.time>e.delay&&(e.func(e.args),$.splice(t,1));for(r=performance.now();ee.length>0;){if(e=ee.shift(),o=performance.now(),!(o-r<n)){ee.unshift(e);break}e.func(e.args)}for(r=performance.now();te.length>0;)e=te.shift(),o=performance.now(),o-r<n&&e.func(e.args);Q=r,ne=ne.concat(oe),oe=[]}(),re=j.requestAnimationFrame(se)}se();var ae={addEF:function(e,t){const n=++ie;return J[n]={func:e,args:t},n},removeEF:function(e){return void 0!==J[e]&&(J[e]=null),-1},delay:function(e,t,n){const o=performance.now();$.push({func:e,args:t,delay:n,time:o})},next:function(e,t){oe.push({func:e,args:t})},defer:function(e,t){ee.push({func:e,args:t})},usurp:function(e,t){te.push({func:e,args:t})},setRequestAnimationFrameSource:function(e){re>-1&&window.cancelAnimationFrame(re),j=e,se()},setFrameRate:function(e){W=e},getElapsedTime:function(){return Z},getDeltaTime:function(){return K}};const ce=ae;class ue{constructor(e,t=.1){this.easing=t,this._value=e,this._targetValue=e,this._efIndex=ce.addEF((()=>this._update()))}_update(){this._checkLimit(),this._value+=(this._targetValue-this._value)*this.easing,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue)}setTo(e){this._targetValue=this._value=e}add(e){this._targetValue+=e}limit(e,t){e>t?this.limit(t,e):(this._min=e,this._max=t,this._checkLimit())}_checkLimit(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}destroy(){ce.removeEF(this._efIndex)}set value(e){this._targetValue=e}get value(){return this._value}get targetValue(){return this._targetValue}}const le=function(e,t){const n=t||{};return e.touches?(n.x=e.touches[0].pageX,n.y=e.touches[0].pageY):(n.x=e.clientX,n.y=e.clientY),n};class he{constructor(e,t=window,n=10){this._target=e,this._listenerTarget=t,this._mouse={},this._preMouse={},this.center=N.create(),this._up=N.fromValues(0,1,0),this.radius=new ue(n),this.position=N.fromValues(0,0,this.radius.value),this.positionOffset=N.create(),this._rx=new ue(0),this._rx.limit(-Math.PI/2,Math.PI/2),this._ry=new ue(0),this._preRX=0,this._preRY=0,this._isLockZoom=!1,this._isLockRotation=!1,this._isInvert=!1,this.sensitivity=1,this._wheelBind=e=>this._onWheel(e),this._downBind=e=>this._onDown(e),this._moveBind=e=>this._onMove(e),this._upBind=()=>this._onUp(),this.connect(),ce.addEF((()=>this._loop()))}connect(){this.disconnect(),this._listenerTarget.addEventListener("mousewheel",this._wheelBind),this._listenerTarget.addEventListener("DOMMouseScroll",this._wheelBind),this._listenerTarget.addEventListener("mousedown",this._downBind),this._listenerTarget.addEventListener("touchstart",this._downBind),this._listenerTarget.addEventListener("mousemove",this._moveBind),this._listenerTarget.addEventListener("touchmove",this._moveBind),window.addEventListener("touchend",this._upBind),window.addEventListener("mouseup",this._upBind)}disconnect(){this._listenerTarget.removeEventListener("mousewheel",this._wheelBind),this._listenerTarget.removeEventListener("DOMMouseScroll",this._wheelBind),this._listenerTarget.removeEventListener("mousedown",this._downBind),this._listenerTarget.removeEventListener("touchstart",this._downBind),this._listenerTarget.removeEventListener("mousemove",this._moveBind),this._listenerTarget.removeEventListener("touchmove",this._moveBind),window.removeEventListener("touchend",this._upBind),window.removeEventListener("mouseup",this._upBind)}lock(e=!0){this._isLockZoom=e,this._isLockRotation=e,this._isMouseDown=!1}lockZoom(e=!0){this._isLockZoom=e}lockRotation(e=!0){this._isLockRotation=e}inverseControl(e=!0){this._isInvert=e}_onDown(e){this._isLockRotation||(this._isMouseDown=!0,le(e,this._mouse),le(e,this._preMouse),this._preRX=this._rx.targetValue,this._preRY=this._ry.targetValue)}_onMove(e){if(!this._isLockRotation&&(le(e,this._mouse),e.touches&&e.preventDefault(),this._isMouseDown)){let e=-(this._mouse.x-this._preMouse.x);this._isInvert&&(e*=-1),this._ry.value=this._preRY-.01*e*this.sensitivity;let t=-(this._mouse.y-this._preMouse.y);this._isInvert&&(t*=-1),this._rx.value=this._preRX-.01*t*this.sensitivity}}_onUp(){this._isLockRotation||(this._isMouseDown=!1)}_onWheel(e){if(this._isLockZoom)return;const t=e.wheelDelta,n=e.detail;let o=0;o=n?t?t/n/40*n>0?1:-1:-n/3:t/120,this.radius.add(2*-o),this.radius.targetValue<0&&(this.radius.value=1e-4)}_loop(){this._updatePosition(),this._target&&this._updateCamera()}update(){this._updatePosition()}_updatePosition(){this.position[1]=Math.sin(this._rx.value)*this.radius.value;const e=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+.5*Math.PI)*e,this.position[2]=Math.sin(this._ry.value+.5*Math.PI)*e,N.add(this.position,this.position,this.positionOffset)}_updateCamera(){this._target.lookAt(this.position,this.center,this._up)}get rx(){return this._rx}get ry(){return this._ry}}const de=e=>{let t,n;return e.touches?(t=e.touches[0].pageX,n=e.touches[0].pageY):(t=e.clientX,n=e.clientY),{x:t,y:n}};class _e extends(t()){constructor(e,t,n,o=!1,r=window){super(),this._mesh=e,this._mesh.generateFaces(),this._camera=t,this.faceVertices=e.faces.map((e=>e.vertices)),this.clickTolerance=8,this._ray=new O([0,0,0],[0,0,-1]),this._hit=N.fromValues(-999,-999,-999),this._lastPos,this._firstPos,this.modelMatrix=_.create(),this.resolution=n||[window.innerWidth,window.innerHeight],this._listenerTarget=r,this._skippingMove=o,this._onMoveBind=e=>this._onMove(e),this._onDownBind=e=>this._onDown(e),this._onUpBind=()=>this._onUp(),this.connect()}connect(){this._listenerTarget.addEventListener("mousedown",this._onDownBind),this._listenerTarget.addEventListener("mousemove",this._onMoveBind),this._listenerTarget.addEventListener("mouseup",this._onUpBind),this._listenerTarget.addEventListener("touchstart",this._onDownBind),this._listenerTarget.addEventListener("touchmove",this._onMoveBind),this._listenerTarget.addEventListener("touchend",this._onUpBind)}disconnect(){this._listenerTarget.removeEventListener("mousedown",this._onDownBind),this._listenerTarget.removeEventListener("mousemove",this._onMoveBind),this._listenerTarget.removeEventListener("mouseup",this._onUpBind),this._listenerTarget.removeEventListener("touchstart",this._onDownBind),this._listenerTarget.removeEventListener("touchmove",this._onMoveBind),this._listenerTarget.removeEventListener("touchend",this._onUpBind)}_checkHit(e="onHit"){const t=this._camera;if(!t)return;const n=this._lastPos.x/this.resolution[0]*2-1,o=-this._lastPos.y/this.resolution[1]*2+1;let r;t.generateRay([n,o,0],this._ray);const i=N.create(),s=N.create(),a=N.create();let c=0;const u=(e,t)=>{N.transformMat4(t,e,this.modelMatrix)};for(let e=0;e<this.faceVertices.length;e++){const n=this.faceVertices[e];u(n[0],i),u(n[1],s),u(n[2],a);const o=this._ray.intersectTriangle(i,s,a);if(o)if(r){const e=N.dist(o,t.position);e<c&&(r=N.clone(o),c=e)}else r=N.clone(o),c=N.dist(r,t.position)}r?(this._hit=N.clone(r),this.emit(e,{hit:r})):this.emit("onUp")}_onDown(e){this._firstPos=de(e),this._lastPos=de(e),this._checkHit("onDown")}_onMove(e){this._lastPos=de(e),this._skippingMove||this._checkHit()}_onUp(){const e=function(e,t){const n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)}(this._firstPos,this._lastPos);e<this.clickTolerance&&this._checkHit()}}class fe{constructor(e){this._GL=e||E,this.camera=new P,this.camera.setPerspective(45*Math.PI/180,E.aspectRatio,.1,100),this.orbitalControl=new he(this.camera,window,15),this.orbitalControl.radius.value=10,this._isRunning=!0,this._initTextures(),this._initViews(),window.addEventListener("resize",(()=>this.resize())),this._efIndex=ce.addEF((()=>this._loop()))}stop(){this._isRunning=!1}resume(){this._isRunning=!0}_initTextures(){}_initViews(){}update(){}render(){}_loop(){this._isRunning&&(this.update(),this._GL.viewport(0,0,this._GL.width,this._GL.height),this._GL.setMatrices(this.camera),this.render())}resize(){this._GL.setSize(window.innerWidth,window.innerHeight),this.camera.setAspectRatio(this._GL.aspectRatio)}}let pe;n(470);const me={init:e=>{pe=e.map((({id:e,file:t,type:n})=>{const o=t;let r;switch(n){case"jpg":case"png":r=new w(t);break;case"text":r=(e=>{const t=e.split("\n"),n=[],o=[],r=[],i=[],s=[],a=[],c=[];let u,l=0;const h=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,d=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,_=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,f=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,p=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,m=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,E=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;function v(e){const t=parseInt(e);return 3*(t>=0?t-1:t+i.length/3)}function g(e){const t=parseInt(e);return 3*(t>=0?t-1:t+s.length/3)}function x(e){const t=parseInt(e);return 2*(t>=0?t-1:t+a.length/2)}function T(e,t,o){n.push([i[e],i[e+1],i[e+2]]),n.push([i[t],i[t+1],i[t+2]]),n.push([i[o],i[o+1],i[o+2]]),c.push(3*l+0),c.push(3*l+1),c.push(3*l+2),l++}function A(e,t,n){o.push([a[e],a[e+1]]),o.push([a[t],a[t+1]]),o.push([a[n],a[n+1]])}function y(e,t,n){r.push([s[e],s[e+1],s[e+2]]),r.push([s[t],s[t+1],s[t+2]]),r.push([s[n],s[n+1],s[n+2]])}function R(e,t,n,o,r,i,s,a,c,u,l,h){let d,_=v(e),f=v(t),p=v(n);void 0===o?T(_,f,p):(d=v(o),T(_,f,d),T(f,p,d)),void 0!==r&&(_=x(r),f=x(i),p=x(s),void 0===o?A(_,f,p):(d=x(a),A(_,f,d),A(f,p,d))),void 0!==c&&(_=g(c),f=g(u),p=g(l),void 0===o?y(_,f,p):(d=g(h),y(_,f,d),y(f,p,d)))}for(let e=0;e<t.length;e++){let n=t[e];n=n.trim(),0!==n.length&&"#"!==n.charAt(0)&&(null!==(u=h.exec(n))?i.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])):null!==(u=d.exec(n))?s.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])):null!==(u=_.exec(n))?a.push(parseFloat(u[1]),parseFloat(u[2])):null!==(u=f.exec(n))?R(u[1],u[2],u[3],u[4]):null!==(u=p.exec(n))?R(u[2],u[5],u[8],u[11],u[3],u[6],u[9],u[12]):null!==(u=m.exec(n))?R(u[2],u[6],u[10],u[14],u[3],u[7],u[11],u[15],u[4],u[8],u[12],u[16]):null!==(u=E.exec(n))&&R(u[2],u[5],u[8],u[11],void 0,void 0,void 0,void 0,u[3],u[6],u[9],u[12]))}return(e=>{const t=e.normals.length>0,n=e.coords.length>0;let o;if(e.positions.length>65535){const r=[];let i=0;const s={};for(s.positions=e.positions.concat(),s.coords=e.coords.concat(),s.indices=e.indices.concat(),s.normals=e.normals.concat();e.indices.length>0;){const a=Math.min(65535,e.positions.length),c=e.indices.splice(0,a),u=[],l=[],h=[];let d,_=0;for(let e=0;e<c.length;e++)c[e]>_&&(_=c[e]),d=c[e],u.push(s.positions[d]),n&&l.push(s.coords[d]),t&&h.push(s.normals[d]),c[e]-=i;i=_+1,o=new b,o.bufferVertex(u),n&&o.bufferTexCoord(l),o.bufferIndex(c),t&&o.bufferNormal(h),r.push(o)}return r}return o=new b,o.bufferVertex(e.positions),n&&o.bufferTexCoord(e.coords),o.bufferIndex(e.indices),t&&o.bufferNormal(e.normals),o})({positions:n,coords:o,normals:r,indices:c})})(t)}return{id:e,source:o,type:n,file:r}})),console.table(pe)},get:e=>{const t=pe.find((t=>t.id===e));return t?t.file:null}},Ee=me;_.fromValues(.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1);const ve=(e,t)=>void 0===e?fxrand():void 0===t?fxrand()*e:e+(t-e)*fxrand(),ge=(Math.PI,()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document),xe="#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\nin vec2 aPosition;\nout vec2 vTextureCoord;\nout vec3 vPositionOffset;\n\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTextureCoord = aPosition * .5 + .5;\n}",Te={numParticles:650,posX:-.01,posY:0,acc_X:3.84,acc_Y:1.23,color1:[12,75,96],color2:[13,80,111],color3:[72,163,192],color4:[125,199,204],color5:[205,179,128],colorEdge1:.31,colorEdge2:.43,colorEdge3:.57,colorEdge4:.58,brightness:1.6,particleSize:.5,noiseScale:.32,noiseStrength:3.43,flowSpeed:.8,mouseRadius:.6,mouseForce:1,lockCamera:!0,autoSave:!1,colorL:[245,136,15],colorR:[132,107,245],minVolume:.5,maxVolume:1.2,strength:1,randomLevel:.2,new_Pscale:1.2};var be=n(842);const Ae=class extends fe{constructor(){super(),this._seed=ve(1e4),this.container=new H,this.changeCamera=!1,this._hit=[0,0,0],this._preHit=[0,0,0],this.meshHit=((e,t,n,o="xy")=>{const r=[],i=[],s=[],a=[],c=e/n,u=t/n,l=1/n,h=.5*-e,d=.5*-t;let _=0;for(let e=0;e<n;e++)for(let t=0;t<n;t++){const f=c*e+h,p=u*t+d,m=e/n,E=t/n;"xz"===o?(r.push([f,0,p+u]),r.push([f+c,0,p+u]),r.push([f+c,0,p]),r.push([f,0,p]),i.push([m,1-(E+l)]),i.push([m+l,1-(E+l)]),i.push([m+l,1-E]),i.push([m,1-E]),a.push([0,1,0]),a.push([0,1,0]),a.push([0,1,0]),a.push([0,1,0])):"yz"===o?(r.push([0,p,f]),r.push([0,p,f+c]),r.push([0,p+u,f+c]),r.push([0,p+u,f]),i.push([m,E]),i.push([m+l,E]),i.push([m+l,E+l]),i.push([m,E+l]),a.push([1,0,0]),a.push([1,0,0]),a.push([1,0,0]),a.push([1,0,0])):(r.push([f,p,0]),r.push([f+c,p,0]),r.push([f+c,p+u,0]),r.push([f,p+u,0]),i.push([m,E]),i.push([m+l,E]),i.push([m+l,E+l]),i.push([m,E+l]),a.push([0,0,1]),a.push([0,0,1]),a.push([0,0,1]),a.push([0,0,1])),s.push(4*_+0),s.push(4*_+1),s.push(4*_+2),s.push(4*_+0),s.push(4*_+2),s.push(4*_+3),_++}return(new b).bufferVertex(r).bufferTexCoord(i).bufferIndex(s).bufferNormal(a)})(14,8.75,1),this.hitTestor=new _e(this.meshHit,this.camera),this.needUpdateHit=!1,this.hitTestor.on("onHit",(e=>{N.copy(this._preHit,this._hit),N.copy(this._hit,e.hit),this.needUpdateHit=!0})),this.mouseStrength=0,window.addEventListener("mousedown",(e=>this._onDown(e))),window.addEventListener("touchstart",(e=>this._onDown(e))),window.addEventListener("mouseup",(e=>this._onUp(e))),window.addEventListener("touchend",(e=>this._onUp(e))),this.addColorMode=0,this.resize()}_onDown(e){this.activateColor()}_onUp(e){this.stopColor()}activateColor(){this.addColorMode=1}stopColor(){this.addColorMode=0}_initTextures(){const{numParticles:e}=Te,t=ge?E.HALF_FLOAT:E.FLOAT;this._fbo=new Y(e,e,{type:t,minFilter:E.NEAREST,magFilter:E.NEAREST},5)}_initViews(){const{numParticles:e}=Te;this._dAxis=new U,this._dCopy=new z,this._dBall=new B;let t=[];[[12,75,96],[13,80,111],[72,163,192],[125,199,204],[205,179,128]].forEach((e=>{t.push(e[0],e[1],e[2])})),t=t.map((e=>e/255));const n=[],o=[];for(let t=0;t<e;t++)for(let r=0;r<e;r++)n.push([r/e,t/e]),o.push([ve(),ve(),ve()]);const r=(new F).setMesh(D()).useProgram(xe,"#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\nin vec2 vTextureCoord;\nuniform float uSeed;\n\n// curlNoise.glsl\n\nvec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0;  }\n\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0;  }\n\n// snoise.glsl\nvec4 permute_1(vec4 x) {  return mod(((x*34.0)+1.0)*x, 289.0);    }\nvec4 taylorInvSqrt_1(vec4 r) {    return 1.79284291400159 - 0.85373472095314 * r; }\n\nfloat snoise_1(vec3 v){\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D_1 = vec4(0.0, 0.5, 1.0, 2.0);\n    \n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 = v - i + dot(i, C.xxx) ;\n    \n    vec3 g_1 = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g_1;\n    vec3 i1 = min( g_1.xyz, l.zxy );\n    vec3 i2 = max( g_1.xyz, l.zxy );\n    \n    vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n    vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n    vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n    \n    i = mod(i, 289.0 );\n    vec4 p = permute_1( permute_1( permute_1( i.z + vec4(0.0, i1.z, i2.z, 1.0 )) + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n    \n    float n_ = 1.0/7.0;\n    vec3  ns = n_ * D_1.wyz - D_1.xzx;\n    \n    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);\n    \n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );\n    \n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n    \n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n    \n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n    \n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1_1 = b1.xzyw + s1.xzyw*sh.zzww ;\n    \n    vec3 p0_1 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1_1.xy,h.z);\n    vec3 p3 = vec3(a1_1.zw,h.w);\n    \n    vec4 norm = taylorInvSqrt_1(vec4(dot(p0_1,p0_1), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0_1 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    \n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0_1,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat snoise_1(float x, float y, float z){\n    return snoise_1(vec3(x, y, z));\n}\n\nvec3 snoiseVec3( vec3 x ){\n\n\tfloat s  = snoise_1(vec3( x ));\n\tfloat s1 = snoise_1(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n\tfloat s2 = snoise_1(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n\tvec3 c = vec3( s , s1 , s2 );\n\treturn c;\n\n}\n\nvec3 curlNoise( vec3 p ){\n\t\n\tconst float e = .1;\n\tvec3 dx = vec3( e   , 0.0 , 0.0 );\n\tvec3 dy = vec3( 0.0 , e   , 0.0 );\n\tvec3 dz = vec3( 0.0 , 0.0 , e   );\n\n\tvec3 p_x0 = snoiseVec3( p - dx );\n\tvec3 p_x1 = snoiseVec3( p + dx );\n\tvec3 p_y0 = snoiseVec3( p - dy );\n\tvec3 p_y1 = snoiseVec3( p + dy );\n\tvec3 p_z0 = snoiseVec3( p - dz );\n\tvec3 p_z1 = snoiseVec3( p + dz );\n\n\tfloat x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n\tfloat y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n\tfloat z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n\tconst float divisor = 1.0 / ( 2.0 * e );\n\treturn normalize( vec3( x , y , z ) * divisor );\n\n}\n\n// snoise.glsl\nvec4 permute_0(vec4 x) {  return mod(((x*34.0)+1.0)*x, 289.0);    }\nvec4 taylorInvSqrt_0(vec4 r) {    return 1.79284291400159 - 0.85373472095314 * r; }\n\nfloat snoise_0(vec3 v){\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D_0 = vec4(0.0, 0.5, 1.0, 2.0);\n    \n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 = v - i + dot(i, C.xxx) ;\n    \n    vec3 g_0 = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g_0;\n    vec3 i1 = min( g_0.xyz, l.zxy );\n    vec3 i2 = max( g_0.xyz, l.zxy );\n    \n    vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n    vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n    vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n    \n    i = mod(i, 289.0 );\n    vec4 p = permute_0( permute_0( permute_0( i.z + vec4(0.0, i1.z, i2.z, 1.0 )) + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n    \n    float n_ = 1.0/7.0;\n    vec3  ns = n_ * D_0.wyz - D_0.xzx;\n    \n    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);\n    \n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );\n    \n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n    \n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n    \n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n    \n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1_0 = b1.xzyw + s1.xzyw*sh.zzww ;\n    \n    vec3 p0_0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1_0.xy,h.z);\n    vec3 p3 = vec3(a1_0.zw,h.w);\n    \n    vec4 norm = taylorInvSqrt_0(vec4(dot(p0_0,p0_0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0_0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    \n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0_0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat snoise_0(float x, float y, float z){\n    return snoise_0(vec3(x, y, z));\n}\n\nlayout (location = 0) out vec4 oColor0;\nlayout (location = 1) out vec4 oColor1;\nlayout (location = 2) out vec4 oColor2;\nlayout (location = 3) out vec4 oColor3;\nlayout (location = 4) out vec4 oColor4;\n\nvoid main(void) {\n    //vec3 pos = curlNoise(vec3(vTextureCoord, uSeed) * 100.0) * 1.1;\n    //float t = snoise(vec3(uSeed, vTextureCoord));\n    //pos *= (t) ;\n    //pos.x -= 5.;\n    //pos.y -= 3.;\n\n    vec3 pos = vec3((vTextureCoord - vec2(0.5)) * 12., 0.) ;\n    pos.y = pos.y / 16. * 10.;\n\n    vec3 extra = curlNoise(vec3(vTextureCoord.x, uSeed, vTextureCoord.y) * 200.0);\n\n    oColor0 = vec4(pos, 1.);\n    oColor1 = vec4(vec3(0.0), 1.);\n    oColor2 = vec4(extra * .5 + .5, 1.0);\n    oColor3 = vec4(pos, 1.0);\n    oColor4 = vec4(vec3(0.0), 1.);\n}");this._fbo.write.bind(),E.clear(0,0,0,0),r.uniform("uSeed",ve(1e3)).draw(),this._fbo.write.unbind(),this._fbo.swap();const i=new b(E.POINTS).bufferVertex(o).bufferTexCoord(n);this._drawParticles=(new F).setMesh(i).useProgram("// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 uViewport;\n\nuniform vec3 uColors[5];\nuniform float uColorSeed;\n\nuniform sampler2D uPosMap;\nuniform sampler2D uExtraMap;\nuniform sampler2D uColorMap;\n\nuniform float uBrightness;\nuniform float uColorEdge1;\nuniform float uColorEdge2;\nuniform float uColorEdge3;\nuniform float uColorEdge4;\n\nuniform float uParticleSize;\nuniform vec3 uPosOffset;\n\nuniform vec3 colorL;\nuniform vec3 colorR;\nuniform float cParticleSize;\n\nvarying vec3 vColor;\n\n// snoise.glsl\nvec4 permute(vec4 x) {  return mod(((x*34.0)+1.0)*x, 289.0);    }\nvec4 taylorInvSqrt(vec4 r) {    return 1.79284291400159 - 0.85373472095314 * r; }\n\nfloat snoise(vec3 v){\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n    \n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 = v - i + dot(i, C.xxx) ;\n    \n    vec3 g = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g;\n    vec3 i1 = min( g.xyz, l.zxy );\n    vec3 i2 = max( g.xyz, l.zxy );\n    \n    vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n    vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n    vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n    \n    i = mod(i, 289.0 );\n    vec4 p = permute( permute( permute( i.z + vec4(0.0, i1.z, i2.z, 1.0 )) + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n    \n    float n_ = 1.0/7.0;\n    vec3  ns = n_ * D.wyz - D.xzx;\n    \n    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);\n    \n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );\n    \n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n    \n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n    \n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n    \n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n    \n    vec3 p0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1.xy,h.z);\n    vec3 p3 = vec3(a1.zw,h.w);\n    \n    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    \n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat snoise(float x, float y, float z){\n    return snoise(vec3(x, y, z));\n}\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\nmat4 rotationMatrix(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    \n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\nvec3 rotate(vec3 v, vec3 axis, float angle) {\n\tmat4 m = rotationMatrix(axis, angle);\n\treturn (m * vec4(v, 1.0)).xyz;\n}\n\n#define PI 3.141592653589793\n\nfloat particleSize(vec4 screenPos, mat4 mtxProj, vec2 viewport, float radius) {\n\treturn viewport.y * mtxProj[1][1] * radius / screenPos.w;\n}\n\nvoid main(void) {\n    vec3 pos = texture2D(uPosMap, aTextureCoord).xyz;\n    vec3 dColor = texture2D(uColorMap, aTextureCoord).xyz;\n    \n    pos.x -= 1.;\n    pos.x += uPosOffset.x;\n    pos.y += uPosOffset.y;\n    //pos.y -= 0.95;\n    //pos.xy = rotate(pos.xy, -0.14 * PI);\n\n    vec4 worldSpace = uModelMatrix * vec4(pos, 1.0);\n    vec4 cameraSpace = uViewMatrix * worldSpace;\n    vec4 screenSpace = uProjectionMatrix * cameraSpace;\n    gl_Position = screenSpace;\n\n    vec3 color = vec3(0.);\n\n    float newColorSize = 1.;\n    \n    float rnd = ((pos.z) + 1.)*3. - 2.6 ;\n    //+  snoise(vec3(uColorSeed, aTextureCoord)) * 0.02;\n    //rnd += extra.y * 0.45;\n    if(dColor.x > 0.5){\n        color = colorR;\n        newColorSize = cParticleSize;\n    }\n    else if(dColor.x > 0.){\n        color = colorL;\n        newColorSize = cParticleSize;\n    }\n    else if(rnd < uColorEdge1) {\n        color = uColors[0] * 2.;\n    } else if(rnd < uColorEdge2) {\n        color = uColors[1] * 1.5;\n    } else if(rnd < uColorEdge3) {\n        color = uColors[2];\n    } else if(rnd < uColorEdge4) {\n        color = uColors[3];\n    } else {\n        color = uColors[4];\n    }\n\n    // gl_PointSize = mix(12.0, 5.0, aVertexPosition.x);\n    float radius = mix(0.01, 0.03, aVertexPosition.x);\n    gl_PointSize = particleSize(gl_Position, uProjectionMatrix, uViewport, radius * 0.4 * uParticleSize * newColorSize);\n\n    //color += 0.2;\n    color *= mix(0.8, 1.1, (pos.z + 1.)*0.5) * uBrightness;\n    color = pow(color, vec3(1.5));\n    vColor = color;\n}","precision highp float;\n#define GLSLIFY 1\nuniform sampler2D uParticleMap;\nvarying vec3 vColor;\n\nvoid main(void) {\n    float dist = distance(gl_PointCoord, vec2(0.5));\n    if(dist > 0.5) {\n        discard;\n    }\n\n    vec2 uv = gl_PointCoord;\n    uv.y = 1.0 - uv.y;\n    vec3 color = texture2D(uParticleMap, uv).rgb;\n\n    gl_FragColor = vec4(color * vColor * 1.6, 1.0);\n}").uniform("uColors","vec3",t).uniform("uColorSeed",ve(1)),this._drawSim=(new F).setMesh(D()).useProgram(xe,"#version 300 es\n\nprecision highp float;\n#define GLSLIFY 1\nin vec2 vTextureCoord;\n\nuniform sampler2D uPosMap;\nuniform sampler2D uVelMap;\nuniform sampler2D uExtraMap;\nuniform sampler2D uPosOrgMap;\nuniform sampler2D uColorMap;\n\nuniform float uTime;\nuniform float uNoiseScale;\nuniform float uNoiseStrength;\nuniform float uFlowSpeed;\nuniform float uAccX;\nuniform float uAccY;\n\nuniform vec3 mousePos;\nuniform vec3 mousePrev;\nuniform float mouseStrength;\n\nuniform float mouseRadius;\nuniform float mouseForce;\n\nuniform float onAddColor;\nuniform float minVolume;\nuniform float maxVolume;\nuniform float newColorStrength;\nuniform float randomLevel;\n\nuniform vec3 uPosOffset;\n\n// curlNoise.glsl\n\nvec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0;  }\n\nvec4 mod289(vec4 x) { return x - floor(x * (1.0 / 289.0)) * 289.0;  }\n\n// snoise.glsl\nvec4 permute_0(vec4 x) {  return mod(((x*34.0)+1.0)*x, 289.0);    }\nvec4 taylorInvSqrt_0(vec4 r) {    return 1.79284291400159 - 0.85373472095314 * r; }\n\nfloat snoise_0(vec3 v){\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D_0 = vec4(0.0, 0.5, 1.0, 2.0);\n    \n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 = v - i + dot(i, C.xxx) ;\n    \n    vec3 g_0 = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g_0;\n    vec3 i1 = min( g_0.xyz, l.zxy );\n    vec3 i2 = max( g_0.xyz, l.zxy );\n    \n    vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n    vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n    vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n    \n    i = mod(i, 289.0 );\n    vec4 p = permute_0( permute_0( permute_0( i.z + vec4(0.0, i1.z, i2.z, 1.0 )) + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n    \n    float n_ = 1.0/7.0;\n    vec3  ns = n_ * D_0.wyz - D_0.xzx;\n    \n    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);\n    \n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );\n    \n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n    \n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n    \n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n    \n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1_0 = b1.xzyw + s1.xzyw*sh.zzww ;\n    \n    vec3 p0_0 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1_0.xy,h.z);\n    vec3 p3 = vec3(a1_0.zw,h.w);\n    \n    vec4 norm = taylorInvSqrt_0(vec4(dot(p0_0,p0_0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0_0 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    \n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0_0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat snoise_0(float x, float y, float z){\n    return snoise_0(vec3(x, y, z));\n}\n\nvec3 snoiseVec3( vec3 x ){\n\n\tfloat s  = snoise_0(vec3( x ));\n\tfloat s1 = snoise_0(vec3( x.y - 19.1 , x.z + 33.4 , x.x + 47.2 ));\n\tfloat s2 = snoise_0(vec3( x.z + 74.2 , x.x - 124.5 , x.y + 99.4 ));\n\tvec3 c = vec3( s , s1 , s2 );\n\treturn c;\n\n}\n\nvec3 curlNoise( vec3 p ){\n\t\n\tconst float e = .1;\n\tvec3 dx = vec3( e   , 0.0 , 0.0 );\n\tvec3 dy = vec3( 0.0 , e   , 0.0 );\n\tvec3 dz = vec3( 0.0 , 0.0 , e   );\n\n\tvec3 p_x0 = snoiseVec3( p - dx );\n\tvec3 p_x1 = snoiseVec3( p + dx );\n\tvec3 p_y0 = snoiseVec3( p - dy );\n\tvec3 p_y1 = snoiseVec3( p + dy );\n\tvec3 p_z0 = snoiseVec3( p - dz );\n\tvec3 p_z1 = snoiseVec3( p + dz );\n\n\tfloat x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n\tfloat y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n\tfloat z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n\tconst float divisor = 1.0 / ( 2.0 * e );\n\treturn normalize( vec3( x , y , z ) * divisor );\n\n}\n\n// snoise.glsl\nvec4 permute_1(vec4 x) {  return mod(((x*34.0)+1.0)*x, 289.0);    }\nvec4 taylorInvSqrt_1(vec4 r) {    return 1.79284291400159 - 0.85373472095314 * r; }\n\nfloat snoise_1(vec3 v){\n    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n    const vec4  D_1 = vec4(0.0, 0.5, 1.0, 2.0);\n    \n    vec3 i  = floor(v + dot(v, C.yyy) );\n    vec3 x0 = v - i + dot(i, C.xxx) ;\n    \n    vec3 g_1 = step(x0.yzx, x0.xyz);\n    vec3 l = 1.0 - g_1;\n    vec3 i1 = min( g_1.xyz, l.zxy );\n    vec3 i2 = max( g_1.xyz, l.zxy );\n    \n    vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n    vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n    vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n    \n    i = mod(i, 289.0 );\n    vec4 p = permute_1( permute_1( permute_1( i.z + vec4(0.0, i1.z, i2.z, 1.0 )) + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n    \n    float n_ = 1.0/7.0;\n    vec3  ns = n_ * D_1.wyz - D_1.xzx;\n    \n    vec4 j = p - 49.0 * floor(p * ns.z *ns.z);\n    \n    vec4 x_ = floor(j * ns.z);\n    vec4 y_ = floor(j - 7.0 * x_ );\n    \n    vec4 x = x_ *ns.x + ns.yyyy;\n    vec4 y = y_ *ns.x + ns.yyyy;\n    vec4 h = 1.0 - abs(x) - abs(y);\n    \n    vec4 b0 = vec4( x.xy, y.xy );\n    vec4 b1 = vec4( x.zw, y.zw );\n    \n    vec4 s0 = floor(b0)*2.0 + 1.0;\n    vec4 s1 = floor(b1)*2.0 + 1.0;\n    vec4 sh = -step(h, vec4(0.0));\n    \n    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n    vec4 a1_1 = b1.xzyw + s1.xzyw*sh.zzww ;\n    \n    vec3 p0_1 = vec3(a0.xy,h.x);\n    vec3 p1 = vec3(a0.zw,h.y);\n    vec3 p2 = vec3(a1_1.xy,h.z);\n    vec3 p3 = vec3(a1_1.zw,h.w);\n    \n    vec4 norm = taylorInvSqrt_1(vec4(dot(p0_1,p0_1), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n    p0_1 *= norm.x;\n    p1 *= norm.y;\n    p2 *= norm.z;\n    p3 *= norm.w;\n    \n    vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n    m = m * m;\n    return 42.0 * dot( m*m, vec4( dot(p0_1,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3) ) );\n}\n\nfloat snoise_1(float x, float y, float z){\n    return snoise_1(vec3(x, y, z));\n}\n\nvec2 rotate(vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\nmat4 rotationMatrix(vec3 axis, float angle) {\n    axis = normalize(axis);\n    float s = sin(angle);\n    float c = cos(angle);\n    float oc = 1.0 - c;\n    \n    return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                0.0,                                0.0,                                0.0,                                1.0);\n}\n\nvec3 rotate(vec3 v, vec3 axis, float angle) {\n\tmat4 m = rotationMatrix(axis, angle);\n\treturn (m * vec4(v, 1.0)).xyz;\n}\n\nlayout (location = 0) out vec4 oColor0;\nlayout (location = 1) out vec4 oColor1;\nlayout (location = 2) out vec4 oColor2;\nlayout (location = 3) out vec4 oColor3;\nlayout (location = 4) out vec4 oColor4;\n\n#define PI 3.141592653589793\n\nvec3 _normalize(vec3 v) {\n    if(length(v) <= 0.0) {\n        return vec3(0.0);\n    } else {\n        return normalize(v);\n    }\n}\n\nvec3 fbm(vec3 p){\n    vec3 n = vec3(0.0);\n    for(int i = 0; i < 5; i++){\n        float mul = pow(2.0, float(i));\n        n += curlNoise(p*mul) / mul;    \n    }\n\n    return n;\n}\n\nfloat mapRange(float value, float x1, float y1, float x2, float y2)\n{\n    float result = (value - x1) * (y2 - x2) / (y1 - x1) + x2;\n    return result;\n}\n\nvoid main(void) {\n    vec3 pos = texture(uPosMap, vTextureCoord).xyz;\n    vec3 vel = texture(uVelMap, vTextureCoord).xyz;\n    vec3 extra = texture(uExtraMap, vTextureCoord).xyz;\n    vec3 posOrg = texture(uPosOrgMap, vTextureCoord).xyz;\n    vec3 dColor = texture(uColorMap, vTextureCoord).xyz;\n\n    //adjust mouse position\n    vec3 mPos = mousePos;\n    vec3 mPrev = mousePrev;\n\n    mPos.x += (1.- uPosOffset.x);\n    mPos.y += (-uPosOffset.y);\n\n    mPrev.x += (1.- uPosOffset.x);\n    mPrev.y += (-uPosOffset.y);\n    \n\n    //float speed = mix(1.0, 2.0, extra.x);\n\n    //float offset = snoise(pos * 0.2 + uTime * 0.1) * 0.5 + 0.5;\n    //offset = mix(0.2, 0.4, offset);\n\n    //float rotSpeed = 0.01;\n    //posOrg.xz = rotate(posOrg.xz, rotSpeed);\n    //posOrg.yz = rotate(posOrg.zy, -rotSpeed);\n\n    vec3 acc = vec3(0.);\n\n    // noise force\n    //acc += curlNoise(pos * 0.5 + uTime * 0.1);\n    //vec3 acc = curlNoise(pos * offset + uTime * 0.1);\n\n    //vec3 acc = fbm(pos * offset + uTime * 0.1);\n    acc += (fbm(pos * uNoiseScale + uTime * 0.1) * uNoiseStrength);\n    acc.x += uAccX;\n    acc.y += uAccY;\n    acc.z *= 0.05;\n\n    vec3 pa = pos - mPrev, ba = mPos - mPrev;\n\tvec3 q = mPrev + ba * clamp( dot( pa, ba ) / dot( ba, ba ), 0.0, 1.0 );\n    \n\tvec3 offset = pos - mPos;\n\tfloat nDist = length( offset ) / mouseRadius;\n    vec3 d_offset = vec3(0.);\n\n    float mStrength = mix(1., 3., mouseStrength);\n\n    float newColorRadius = 1.;\n\n    // mouse perturbation displacement\n\tif ( nDist < 1.0 ){\n        d_offset += (normalize( offset ) * mix( 1., 0., nDist) * 35.) * mouseForce * mStrength + extra * 1.;\n        acc.xy += d_offset.xy;\n    }\n\n    //color\n    if(onAddColor == 1.){\n    if(mPos.x < -0.7){\n        newColorRadius = smoothstep(-0.7, -4., pos.x) * smoothstep(-0.7, -4., pos.x);\n        newColorRadius = mapRange(newColorRadius, 0., 1., minVolume, maxVolume); //min:0.8, max:1.5\n        newColorRadius = (newColorRadius * (1.2 - randomLevel) + extra.y * (smoothstep(-0.7, -4., pos.x) + 1.) * randomLevel ) * newColorStrength;\n        if (nDist < newColorRadius)\n            dColor.x = 0.5;\n    }\n    else if(mPos.x > 1.){\n        /*newColorRadius = smoothstep(1., 4., pos.x) * 0.5;\n        newColorRadius = pow(newColorRadius, 2.) + 0.5 + extra.y * 0.1 * (smoothstep(1., 4., pos.x) + 1.);\n        if (nDist < newColorRadius)\n            dColor.x = 1.;*/\n        newColorRadius = smoothstep(1., 4., pos.x) * smoothstep(1., 4., pos.x);\n        newColorRadius = mapRange(newColorRadius, 0., 1., minVolume, maxVolume); //min:0.8, max:1.5\n        newColorRadius = (newColorRadius * (1.2 - randomLevel) + extra.y * (smoothstep(1., 4., pos.x) + 1.) * randomLevel ) * newColorStrength;\n        if (nDist < newColorRadius)\n            dColor.x = 1.;\n    }\n    }\n    // rotating force\n    /*\n    vec3 dir = pos * vec3(1.0, 0.0, 1.0);\n    dir = _normalize(dir);   // be careful dir = vec3(0.0, 0.0, 0.0);\n    dir.xz = rotate(dir.xz, PI * 0.65);\n    float f = mix(1.0, .8, extra.y);\n    acc += dir * f;*/\n\n    // pulling back force\n    /*float maxRadius = 1.5;\n    vec3 center = vec3(-3., -2.0, 0.0);\n    float distToCenter = distance(pos, center);\n    float f1 = smoothstep(0.5, 2.0, distToCenter);\n    vec3 dir = normalize(pos - center);\n    acc -= dir * f1;*/\n\n    /*if(distToCenter > maxRadius) {\n        vec3 dir = -normalize(pos);\n        float f = (distToCenter - maxRadius) * 10.0;\n        //acc += dir * f * mix(0.5, 1.0, extra.y);\n    }*/\n\n    float speedOffset = mix(0.95, 1.0, extra.z);\n    \n    vel += acc * 0.0006 * speedOffset * uFlowSpeed;\n    pos += vel;\n\n    vel *= 0.9;\n\n    if(abs(pos.x) > 7. || abs(pos.y) > 4.){\n        pos = -posOrg + vel* 2.;\n        vel = vec3(0.0);\n        dColor.x = 0.;\n    }\n \n    oColor0 = vec4(pos, 1.0);\n    oColor1 = vec4(vel, 1.);\n    oColor2 = vec4(extra, 1.0);\n    oColor3 = vec4(posOrg, 1.0);\n    oColor4 = vec4(dColor, 1.0);\n}").setClearColor(0,0,0,1)}update(){if(this.needUpdateHit){const n=[0,0,0];N.sub(n,this._hit,this._preHit);const o=[n[0],n[1]],r=be.length(o);if(r>0){let n=(0,.5,e=r,(t=Math.max(0,Math.min(1,(e-0)/.5)))*t*(3-2*t));this.mouseStrength=n}else this.mouseStrength=0}var e,t;this._drawSim.bindFrameBuffer(this._fbo.write).bindTexture("uPosMap",this._fbo.read.getTexture(0),0).bindTexture("uVelMap",this._fbo.read.getTexture(1),1).bindTexture("uExtraMap",this._fbo.read.getTexture(2),2).bindTexture("uPosOrgMap",this._fbo.read.getTexture(3),3).bindTexture("uColorMap",this._fbo.read.getTexture(4),4).uniform("uTime",ce.getElapsedTime()+this._seed).uniform("uNoiseScale",Te.noiseScale).uniform("uNoiseStrength",Te.noiseStrength).uniform("uFlowSpeed",Te.flowSpeed).uniform("uAccX",Te.acc_X).uniform("uAccY",Te.acc_Y).uniform("mousePos",this._hit).uniform("mousePrev",this._preHit).uniform("mouseRadius",Te.mouseRadius).uniform("mouseForce",Te.mouseForce).uniform("mouseStrength",this.mouseStrength).uniform("uPosOffset",[Te.posX,Te.posY,1]).uniform("onAddColor",this.addColorMode).uniform("minVolume",Te.minVolume).uniform("maxVolume",Te.maxVolume).uniform("newColorStrength",Te.strength).uniform("randomLevel",Te.randomLevel).draw(),this._fbo.swap()}render(){E.clear(0,0,0,1),E.setMatrices(this.camera),E.setModelMatrix(this.container.matrix),this._drawParticles.bindTexture("uPosMap",this._fbo.read.getTexture(0),0).bindTexture("uParticleMap",Ee.get("particle"),1).bindTexture("uExtraMap",this._fbo.read.getTexture(2),2).bindTexture("uColorMap",this._fbo.read.getTexture(4),4).uniform("uViewport",[E.width,E.height]).uniform("uParticleSize",Te.particleSize).uniform("uBrightness",Te.brightness).uniform("uColorEdge1",Te.colorEdge1).uniform("uColorEdge2",Te.colorEdge2).uniform("uColorEdge3",Te.colorEdge3).uniform("uColorEdge4",Te.colorEdge4).uniform("uColors[0]",Te.color1.map((e=>e/255))).uniform("uColors[1]",Te.color2.map((e=>e/255))).uniform("uColors[2]",Te.color3.map((e=>e/255))).uniform("uColors[3]",Te.color4.map((e=>e/255))).uniform("uColors[4]",Te.color5.map((e=>e/255))).uniform("uPosOffset",[Te.posX,Te.posY,1]).uniform("colorL",Te.colorL.map((e=>e/255))).uniform("colorR",Te.colorR.map((e=>e/255))).uniform("cParticleSize",Te.new_Pscale).draw(),Te.lockCamera?this.changeCamera||(this.orbitalControl.lock(),this.changeCamera=!0):this.changeCamera&&(this.orbitalControl._isLockZoom=!1,this.orbitalControl._isLockRotation=!1,this.changeCamera=!1)}resize(){const{innerWidth:e,innerHeight:t,devicePixelRatio:n}=window;let o=Math.max(2,n);o=1;const r=e,i=t;((e,t,n,o)=>{const{innerWidth:r,innerHeight:i}=window;t=t||r,n=n||i,o&&o.setSize(t,n);let s=Math.min(t,r),a=Math.min(n,i);const c=r/t,u=i/n,l=Math.min(c,u);s=t*l,a=n*l;const h=Math.floor(r-s)/2,d=Math.floor(i-a)/2;e.style.cssText=`\n    position:absolute;\n    width:${s}px;\n    height:${a}px;\n    top:${d}px;\n    left:${0*h}px;\n  `})(E.canvas,1*r,1*i,E),this.camera.setAspectRatio(E.aspectRatio),this.hitTestor=new _e(this.meshHit,this.camera),this.needUpdateHit=!1,this.hitTestor.on("onHit",(e=>{N.copy(this._preHit,this._hit),N.copy(this._hit,e.hit),this.needUpdateHit=!0}))}};var ye=n(160),Re=n.n(ye);let Me=!0;const Ce=()=>{Me&&window.history.pushState("experiment","Title",window.location.origin+window.location.pathname+"?config="+JSON.stringify(Te))};let Se=-1;const we={enabled:Me,reload:()=>{Me&&(window.location.href=window.location.origin+window.location.pathname+"?config="+JSON.stringify(Te))},reset:()=>{window.location.href=window.location.origin+window.location.pathname},refresh:Ce,delayReload:()=>{Me&&(window.clearTimeout(Se),Se=window.setTimeout((()=>{window.location.href=window.location.origin+window.location.pathname+"?config="+JSON.stringify(Te)}),500))},init:(e=!0)=>{Me=e;const t=Re()(window.location.search,!0);let n={};t.query.config&&(n=JSON.parse(t.query.config)),Object.assign(Te,n),Ce()}},Le=[{id:"particle",url:"assets/particle.png",type:"png"},{id:"sphere",url:"assets/sphere.obj",type:"text"}];var Ne=n(757),Ie=n.n(Ne);String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)},window.addEventListener("keydown",(e=>{if(83===e.keyCode&&(e.metaKey||e.ctrlKey)){e.preventDefault();const t=(()=>{const e=new Date;return`${e.getFullYear()}.${e.getMonth()+1}.${e.getDate()}-${e.getHours()}.${e.getMinutes()}.${e.getSeconds()}`})();((e,t)=>{var n=document.createElement("a"),o=(e=>{for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],o=atob(t[1]),r=o.length,i=new Uint8Array(r);r--;)i[r]=o.charCodeAt(r);return new Blob([i],{type:n})})(e.toDataURL({format:"png",multiplier:4})),r=URL.createObjectURL(o);n.download=`${t}.png`,n.href=r,n.click()})(document.querySelector("#main-canvas"),t)}}));var Oe=n(571);const Pe=new(n.n(Oe)());function Fe(e,t){var n=e.__state.conversionName.toString(),o=Math.round(e.r),r=Math.round(e.g),i=Math.round(e.b),s=e.a,a=Math.round(e.h),c=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===n||"SIX_CHAR_HEX"===n){for(var l=e.hex.toString(16);l.length<6;)l="0"+l;return"#"+l}return"CSS_RGB"===n?"rgb("+o+","+r+","+i+")":"CSS_RGBA"===n?"rgba("+o+","+r+","+i+","+s+")":"HEX"===n?"0x"+e.hex.toString(16):"RGB_ARRAY"===n?"["+o+","+r+","+i+"]":"RGBA_ARRAY"===n?"["+o+","+r+","+i+","+s+"]":"RGB_OBJ"===n?"{r:"+o+",g:"+r+",b:"+i+"}":"RGBA_OBJ"===n?"{r:"+o+",g:"+r+",b:"+i+",a:"+s+"}":"HSV_OBJ"===n?"{h:"+a+",s:"+c+",v:"+u+"}":"HSVA_OBJ"===n?"{h:"+a+",s:"+c+",v:"+u+",a:"+s+"}":"unknown format"}document.body.appendChild(Pe.domElement),ce.addEF((()=>{Pe.update()}));var Ue=Array.prototype.forEach,De=Array.prototype.slice,Be={BREAK:{},extend:function(e){return this.each(De.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))}),this),e},defaults:function(e){return this.each(De.call(arguments,1),(function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))}),this),e},compose:function(){var e=De.call(arguments);return function(){for(var t=De.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(Ue&&e.forEach&&e.forEach===Ue)e.forEach(t,n);else if(e.length===e.length+0){var o,r=void 0;for(r=0,o=e.length;r<o;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var i in e)if(t.call(n,e[i],i)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var o=void 0;return function(){var r=this,i=arguments,s=n||!o;clearTimeout(o),o=setTimeout((function(){o=null,n||e.apply(r,i)}),t),s&&e.apply(r,i)}},toArray:function(e){return e.toArray?e.toArray():De.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return isNaN(e)})),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},ze=[{litmus:Be.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:Fe},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:Fe},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:Fe},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:Fe}}},{litmus:Be.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:Be.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:Be.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(Be.isNumber(e.r)&&Be.isNumber(e.g)&&Be.isNumber(e.b)&&Be.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(Be.isNumber(e.r)&&Be.isNumber(e.g)&&Be.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(Be.isNumber(e.h)&&Be.isNumber(e.s)&&Be.isNumber(e.v)&&Be.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(Be.isNumber(e.h)&&Be.isNumber(e.s)&&Be.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],Ve=void 0,Ge=void 0,Xe=function(){Ge=!1;var e=arguments.length>1?Be.toArray(arguments):arguments[0];return Be.each(ze,(function(t){if(t.litmus(e))return Be.each(t.conversions,(function(t,n){if(Ve=t.read(e),!1===Ge&&!1!==Ve)return Ge=Ve,Ve.conversionName=n,Ve.conversion=t,Be.BREAK})),Be.BREAK})),Ge},He=void 0,ke={hsv_to_rgb:function(e,t,n){var o=Math.floor(e/60)%6,r=e/60-Math.floor(e/60),i=n*(1-t),s=n*(1-r*t),a=n*(1-(1-r)*t),c=[[n,a,i],[s,n,i],[i,n,a],[i,s,n],[a,i,n],[n,i,s]][o];return{r:255*c[0],g:255*c[1],b:255*c[2]}},rgb_to_hsv:function(e,t,n){var o=Math.min(e,t,n),r=Math.max(e,t,n),i=r-o,s=void 0;return 0===r?{h:NaN,s:0,v:0}:(s=e===r?(t-n)/i:t===r?2+(n-e)/i:4+(e-t)/i,(s/=6)<0&&(s+=1),{h:360*s,s:i/r,v:r/255})},rgb_to_hex:function(e,t,n){var o=this.hex_with_component(0,2,e);return o=this.hex_with_component(o,1,t),this.hex_with_component(o,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(He=8*t)|e&~(255<<He)}},Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},We=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),qe=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(o):void 0},Ke=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Ze=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Qe=function(){function e(){if(je(this,e),this.__state=Xe.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return We(e,[{key:"toString",value:function(){return Fe(this)}},{key:"toHexString",value:function(){return Fe(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function Je(e,t,n){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space||Qe.recalculateRGB(this,t,n),this.__state[t]},set:function(e){"RGB"!==this.__state.space&&(Qe.recalculateRGB(this,t,n),this.__state.space="RGB"),this.__state[t]=e}})}function $e(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space||Qe.recalculateHSV(this),this.__state[t]},set:function(e){"HSV"!==this.__state.space&&(Qe.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}Qe.recalculateRGB=function(e,t,n){if("HEX"===e.__state.space)e.__state[t]=ke.component_from_hex(e.__state.hex,n);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");Be.extend(e.__state,ke.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},Qe.recalculateHSV=function(e){var t=ke.rgb_to_hsv(e.r,e.g,e.b);Be.extend(e.__state,{s:t.s,v:t.v}),Be.isNaN(t.h)?Be.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},Qe.COMPONENTS=["r","g","b","h","s","v","hex","a"],Je(Qe.prototype,"r",2),Je(Qe.prototype,"g",1),Je(Qe.prototype,"b",0),$e(Qe.prototype,"h"),$e(Qe.prototype,"s"),$e(Qe.prototype,"v"),Object.defineProperty(Qe.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(Qe.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=ke.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var et=function(){function e(t,n){je(this,e),this.initialValue=t[n],this.domElement=document.createElement("div"),this.object=t,this.property=n,this.__onChange=void 0,this.__onFinishChange=void 0}return We(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),tt={};Be.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},(function(e,t){Be.each(e,(function(e){tt[e]=t}))}));var nt=/(\d+(\.\d+)?)px/;function ot(e){if("0"===e||Be.isUndefined(e))return 0;var t=e.match(nt);return Be.isNull(t)?0:parseFloat(t[1])}var rt={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var o=n,r=t;Be.isUndefined(r)&&(r=!0),Be.isUndefined(o)&&(o=!0),e.style.position="absolute",r&&(e.style.left=0,e.style.right=0),o&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,o){var r=n||{},i=tt[t];if(!i)throw new Error("Event type "+t+" not supported.");var s=document.createEvent(i);switch(i){case"MouseEvents":var a=r.x||r.clientX||0,c=r.y||r.clientY||0;s.initMouseEvent(t,r.bubbles||!1,r.cancelable||!0,window,r.clickCount||1,0,0,a,c,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var u=s.initKeyboardEvent||s.initKeyEvent;Be.defaults(r,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),u(t,r.bubbles||!1,r.cancelable,window,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,r.keyCode,r.charCode);break;default:s.initEvent(t,r.bubbles||!1,r.cancelable||!0)}Be.defaults(s,o),e.dispatchEvent(s)},bind:function(e,t,n,o){var r=o||!1;return e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n),rt},unbind:function(e,t,n,o){var r=o||!1;return e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n),rt},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return rt},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),o=n.indexOf(t);-1!==o&&(n.splice(o,1),e.className=n.join(" "))}else e.className=void 0;return rt},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return ot(t["border-left-width"])+ot(t["border-right-width"])+ot(t["padding-left"])+ot(t["padding-right"])+ot(t.width)},getHeight:function(e){var t=getComputedStyle(e);return ot(t["border-top-width"])+ot(t["border-bottom-width"])+ot(t["padding-top"])+ot(t["padding-bottom"])+ot(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},it=function(e){function t(e,n){je(this,t);var o=Ze(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o;return o.__prev=o.getValue(),o.__checkbox=document.createElement("input"),o.__checkbox.setAttribute("type","checkbox"),rt.bind(o.__checkbox,"change",(function(){r.setValue(!r.__prev)}),!1),o.domElement.appendChild(o.__checkbox),o.updateDisplay(),o}return Ke(t,e),We(t,[{key:"setValue",value:function(e){var n=qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),n}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(et),st=function(e){function t(e,n,o){je(this,t);var r=Ze(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o,s=r;if(r.__select=document.createElement("select"),Be.isArray(i)){var a={};Be.each(i,(function(e){a[e]=e})),i=a}return Be.each(i,(function(e,t){var n=document.createElement("option");n.innerHTML=t,n.setAttribute("value",e),s.__select.appendChild(n)})),r.updateDisplay(),rt.bind(r.__select,"change",(function(){var e=this.options[this.selectedIndex].value;s.setValue(e)})),r.domElement.appendChild(r.__select),r}return Ke(t,e),We(t,[{key:"setValue",value:function(e){var n=qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),n}},{key:"updateDisplay",value:function(){return rt.isActive(this.__select)?this:(this.__select.value=this.getValue(),qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(et),at=function(e){function t(e,n){je(this,t);var o=Ze(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=o;function i(){r.setValue(r.__input.value)}return o.__input=document.createElement("input"),o.__input.setAttribute("type","text"),rt.bind(o.__input,"keyup",i),rt.bind(o.__input,"change",i),rt.bind(o.__input,"blur",(function(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())})),rt.bind(o.__input,"keydown",(function(e){13===e.keyCode&&this.blur()})),o.updateDisplay(),o.domElement.appendChild(o.__input),o}return Ke(t,e),We(t,[{key:"updateDisplay",value:function(){return rt.isActive(this.__input)||(this.__input.value=this.getValue()),qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(et);function ct(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var ut=function(e){function t(e,n,o){je(this,t);var r=Ze(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=o||{};return r.__min=i.min,r.__max=i.max,r.__step=i.step,Be.isUndefined(r.__step)?0===r.initialValue?r.__impliedStep=1:r.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(r.initialValue))/Math.LN10))/10:r.__impliedStep=r.__step,r.__precision=ct(r.__impliedStep),r}return Ke(t,e),We(t,[{key:"setValue",value:function(e){var n=e;return void 0!==this.__min&&n<this.__min?n=this.__min:void 0!==this.__max&&n>this.__max&&(n=this.__max),void 0!==this.__step&&n%this.__step!=0&&(n=Math.round(n/this.__step)*this.__step),qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,n)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=ct(e),this}}]),t}(et),lt=function(e){function t(e,n,o){je(this,t);var r=Ze(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));r.__truncationSuspended=!1;var i=r,s=void 0;function a(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}function c(e){var t=s-e.clientY;i.setValue(i.getValue()+t*i.__impliedStep),s=e.clientY}function u(){rt.unbind(window,"mousemove",c),rt.unbind(window,"mouseup",u),a()}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),rt.bind(r.__input,"change",(function(){var e=parseFloat(i.__input.value);Be.isNaN(e)||i.setValue(e)})),rt.bind(r.__input,"blur",(function(){a()})),rt.bind(r.__input,"mousedown",(function(e){rt.bind(window,"mousemove",c),rt.bind(window,"mouseup",u),s=e.clientY})),rt.bind(r.__input,"keydown",(function(e){13===e.keyCode&&(i.__truncationSuspended=!0,this.blur(),i.__truncationSuspended=!1,a())})),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return Ke(t,e),We(t,[{key:"updateDisplay",value:function(){var e,n,o;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),n=this.__precision,o=Math.pow(10,n),Math.round(e*o)/o),qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(ut);function ht(e,t,n,o,r){return o+(e-t)/(n-t)*(r-o)}var dt=function(e){function t(e,n,o,r,i){je(this,t);var s=Ze(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,{min:o,max:r,step:i})),a=s;function c(e){e.preventDefault();var t=a.__background.getBoundingClientRect();return a.setValue(ht(e.clientX,t.left,t.right,a.__min,a.__max)),!1}function u(){rt.unbind(window,"mousemove",c),rt.unbind(window,"mouseup",u),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function l(e){var t=e.touches[0].clientX,n=a.__background.getBoundingClientRect();a.setValue(ht(t,n.left,n.right,a.__min,a.__max))}function h(){rt.unbind(window,"touchmove",l),rt.unbind(window,"touchend",h),a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}return s.__background=document.createElement("div"),s.__foreground=document.createElement("div"),rt.bind(s.__background,"mousedown",(function(e){document.activeElement.blur(),rt.bind(window,"mousemove",c),rt.bind(window,"mouseup",u),c(e)})),rt.bind(s.__background,"touchstart",(function(e){1===e.touches.length&&(rt.bind(window,"touchmove",l),rt.bind(window,"touchend",h),l(e))})),rt.addClass(s.__background,"slider"),rt.addClass(s.__foreground,"slider-fg"),s.updateDisplay(),s.__background.appendChild(s.__foreground),s.domElement.appendChild(s.__background),s}return Ke(t,e),We(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",qe(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(ut),_t=function(e){function t(e,n,o){je(this,t);var r=Ze(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),i=r;return r.__button=document.createElement("div"),r.__button.innerHTML=void 0===o?"Fire":o,rt.bind(r.__button,"click",(function(e){return e.preventDefault(),i.fire(),!1})),rt.addClass(r.__button,"button"),r.domElement.appendChild(r.__button),r}return Ke(t,e),We(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(et),ft=function(e){function t(e,n){je(this,t);var o=Ze(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));o.__color=new Qe(o.getValue()),o.__temp=new Qe(0);var r=o;o.domElement=document.createElement("div"),rt.makeSelectable(o.domElement,!1),o.__selector=document.createElement("div"),o.__selector.className="selector",o.__saturation_field=document.createElement("div"),o.__saturation_field.className="saturation-field",o.__field_knob=document.createElement("div"),o.__field_knob.className="field-knob",o.__field_knob_border="2px solid ",o.__hue_knob=document.createElement("div"),o.__hue_knob.className="hue-knob",o.__hue_field=document.createElement("div"),o.__hue_field.className="hue-field",o.__input=document.createElement("input"),o.__input.type="text",o.__input_textShadow="0 1px 1px ",rt.bind(o.__input,"keydown",(function(e){13===e.keyCode&&h.call(this)})),rt.bind(o.__input,"blur",h),rt.bind(o.__selector,"mousedown",(function(){rt.addClass(this,"drag").bind(window,"mouseup",(function(){rt.removeClass(r.__selector,"drag")}))})),rt.bind(o.__selector,"touchstart",(function(){rt.addClass(this,"drag").bind(window,"touchend",(function(){rt.removeClass(r.__selector,"drag")}))}));var i,s=document.createElement("div");function a(e){_(e),rt.bind(window,"mousemove",_),rt.bind(window,"touchmove",_),rt.bind(window,"mouseup",u),rt.bind(window,"touchend",u)}function c(e){f(e),rt.bind(window,"mousemove",f),rt.bind(window,"touchmove",f),rt.bind(window,"mouseup",l),rt.bind(window,"touchend",l)}function u(){rt.unbind(window,"mousemove",_),rt.unbind(window,"touchmove",_),rt.unbind(window,"mouseup",u),rt.unbind(window,"touchend",u),d()}function l(){rt.unbind(window,"mousemove",f),rt.unbind(window,"touchmove",f),rt.unbind(window,"mouseup",l),rt.unbind(window,"touchend",l),d()}function h(){var e=Xe(this.value);!1!==e?(r.__color.__state=e,r.setValue(r.__color.toOriginal())):this.value=r.__color.toString()}function d(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function _(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__saturation_field.getBoundingClientRect(),n=e.touches&&e.touches[0]||e,o=n.clientX,i=n.clientY,s=(o-t.left)/(t.right-t.left),a=1-(i-t.top)/(t.bottom-t.top);return a>1?a=1:a<0&&(a=0),s>1?s=1:s<0&&(s=0),r.__color.v=a,r.__color.s=s,r.setValue(r.__color.toOriginal()),!1}function f(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=r.__hue_field.getBoundingClientRect(),n=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return n>1?n=1:n<0&&(n=0),r.__color.h=360*n,r.setValue(r.__color.toOriginal()),!1}return Be.extend(o.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),Be.extend(o.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:o.__field_knob_border+(o.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),Be.extend(o.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),Be.extend(o.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),Be.extend(s.style,{width:"100%",height:"100%",background:"none"}),mt(s,"top","rgba(0,0,0,0)","#000"),Be.extend(o.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(i=o.__hue_field).style.background="",i.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",i.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",Be.extend(o.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:o.__input_textShadow+"rgba(0,0,0,0.7)"}),rt.bind(o.__saturation_field,"mousedown",a),rt.bind(o.__saturation_field,"touchstart",a),rt.bind(o.__field_knob,"mousedown",a),rt.bind(o.__field_knob,"touchstart",a),rt.bind(o.__hue_field,"mousedown",c),rt.bind(o.__hue_field,"touchstart",c),o.__saturation_field.appendChild(s),o.__selector.appendChild(o.__field_knob),o.__selector.appendChild(o.__saturation_field),o.__selector.appendChild(o.__hue_field),o.__hue_field.appendChild(o.__hue_knob),o.domElement.appendChild(o.__input),o.domElement.appendChild(o.__selector),o.updateDisplay(),o}return Ke(t,e),We(t,[{key:"updateDisplay",value:function(){var e=Xe(this.getValue());if(!1!==e){var t=!1;Be.each(Qe.COMPONENTS,(function(n){if(!Be.isUndefined(e[n])&&!Be.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}}),this),t&&Be.extend(this.__color.__state,e)}Be.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=this.__color.v<.5||this.__color.s>.5?255:0,o=255-n;Be.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+n+","+n+","+n+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,mt(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),Be.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+n+","+n+","+n+")",textShadow:this.__input_textShadow+"rgba("+o+","+o+","+o+",.7)"})}}]),t}(et),pt=["-moz-","-o-","-webkit-","-ms-",""];function mt(e,t,n,o){e.style.background="",Be.each(pt,(function(r){e.style.cssText+="background: "+r+"linear-gradient("+t+", "+n+" 0%, "+o+" 100%); "}))}var Et=function(e,t){var n=e[t];return Be.isArray(arguments[2])||Be.isObject(arguments[2])?new st(e,t,arguments[2]):Be.isNumber(n)?Be.isNumber(arguments[2])&&Be.isNumber(arguments[3])?Be.isNumber(arguments[4])?new dt(e,t,arguments[2],arguments[3],arguments[4]):new dt(e,t,arguments[2],arguments[3]):Be.isNumber(arguments[4])?new lt(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new lt(e,t,{min:arguments[2],max:arguments[3]}):Be.isString(n)?new at(e,t):Be.isFunction(n)?new _t(e,t,""):Be.isBoolean(n)?new it(e,t):null},vt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},gt=function(){function e(){je(this,e),this.backgroundElement=document.createElement("div"),Be.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),rt.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),Be.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;rt.bind(this.backgroundElement,"click",(function(){t.hide()}))}return We(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),Be.defer((function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"}))}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",rt.unbind(e.domElement,"webkitTransitionEnd",t),rt.unbind(e.domElement,"transitionend",t),rt.unbind(e.domElement,"oTransitionEnd",t)};rt.bind(this.domElement,"webkitTransitionEnd",t),rt.bind(this.domElement,"transitionend",t),rt.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-rt.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-rt.getHeight(this.domElement)/2+"px"}}]),e}();!function(e,t){var n=t||document,o=document.createElement("style");o.type="text/css",o.innerHTML=e;var r=n.getElementsByTagName("head")[0];try{r.appendChild(o)}catch(e){}}(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var xt="Default",Tt=function(){try{return!!window.localStorage}catch(e){return!1}}(),bt=void 0,At=!0,yt=void 0,Rt=!1,Mt=[],Ct=function e(t){var n=this,o=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),rt.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],o=Be.defaults(o,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),o=Be.defaults(o,{resizable:o.autoPlace,hideable:o.autoPlace}),Be.isUndefined(o.load)?o.load={preset:xt}:o.preset&&(o.load.preset=o.preset),Be.isUndefined(o.parent)&&o.hideable&&Mt.push(this),o.resizable=Be.isUndefined(o.parent)&&o.resizable,o.autoPlace&&Be.isUndefined(o.scrollable)&&(o.scrollable=!0);var r,i=Tt&&"true"===localStorage.getItem(Ot(0,"isLocal")),s=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return o.parent}},scrollable:{get:function(){return o.scrollable}},autoPlace:{get:function(){return o.autoPlace}},closeOnTop:{get:function(){return o.closeOnTop}},preset:{get:function(){return n.parent?n.getRoot().preset:o.load.preset},set:function(e){n.parent?n.getRoot().preset=e:o.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),n.revert()}},width:{get:function(){return o.width},set:function(e){o.width=e,Dt(n,e)}},name:{get:function(){return o.name},set:function(e){o.name=e,a&&(a.innerHTML=o.name)}},closed:{get:function(){return o.closed},set:function(t){o.closed=t,o.closed?rt.addClass(n.__ul,e.CLASS_CLOSED):rt.removeClass(n.__ul,e.CLASS_CLOSED),this.onResize(),n.__closeButton&&(n.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return o.load}},useLocalStorage:{get:function(){return i},set:function(e){Tt&&(i=e,e?rt.bind(window,"unload",s):rt.unbind(window,"unload",s),localStorage.setItem(Ot(0,"isLocal"),e))}}}),Be.isUndefined(o.parent)){if(this.closed=o.closed||!1,rt.addClass(this.domElement,e.CLASS_MAIN),rt.makeSelectable(this.domElement,!1),Tt&&i){n.useLocalStorage=!0;var c=localStorage.getItem(Ot(0,"gui"));c&&(o.load=JSON.parse(c))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,rt.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),o.closeOnTop?(rt.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(rt.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),rt.bind(this.__closeButton,"click",(function(){n.closed=!n.closed}))}else{void 0===o.closed&&(o.closed=!0);var u=document.createTextNode(o.name);rt.addClass(u,"controller-name"),a=St(n,u),rt.addClass(this.__ul,e.CLASS_CLOSED),rt.addClass(a,"title"),rt.bind(a,"click",(function(e){return e.preventDefault(),n.closed=!n.closed,!1})),o.closed||(this.closed=!1)}o.autoPlace&&(Be.isUndefined(o.parent)&&(At&&(yt=document.createElement("div"),rt.addClass(yt,"dg"),rt.addClass(yt,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(yt),At=!1),yt.appendChild(this.domElement),rt.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||Dt(n,o.width)),this.__resizeHandler=function(){n.onResizeDebounced()},rt.bind(window,"resize",this.__resizeHandler),rt.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),rt.bind(this.__ul,"transitionend",this.__resizeHandler),rt.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),o.resizable&&Ut(this),s=function(){Tt&&"true"===localStorage.getItem(Ot(0,"isLocal"))&&localStorage.setItem(Ot(0,"gui"),JSON.stringify(n.getSaveObject()))},this.saveToLocalStorageIfPossible=s,o.parent||((r=n.getRoot()).width+=1,Be.defer((function(){r.width-=1})))};function St(e,t,n){var o=document.createElement("li");return t&&o.appendChild(t),n?e.__ul.insertBefore(o,n):e.__ul.appendChild(o),e.onResize(),o}function wt(e){rt.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&rt.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function Lt(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+"*":n.value}function Nt(e,t){var n=e.getRoot(),o=n.__rememberedObjects.indexOf(t.object);if(-1!==o){var r=n.__rememberedObjectIndecesToControllers[o];if(void 0===r&&(r={},n.__rememberedObjectIndecesToControllers[o]=r),r[t.property]=t,n.load&&n.load.remembered){var i=n.load.remembered,s=void 0;if(i[e.preset])s=i[e.preset];else{if(!i[xt])return;s=i[xt]}if(s[o]&&void 0!==s[o][t.property]){var a=s[o][t.property];t.initialValue=a,t.setValue(a)}}}}function It(e,t,n,o){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var r=void 0;if(o.color)r=new ft(t,n);else{var i=[t,n].concat(o.factoryArgs);r=Et.apply(e,i)}o.before instanceof et&&(o.before=o.before.__li),Nt(e,r),rt.addClass(r.domElement,"c");var s=document.createElement("span");rt.addClass(s,"property-name"),s.innerHTML=r.property;var a=document.createElement("div");a.appendChild(s),a.appendChild(r.domElement);var c=St(e,a,o.before);return rt.addClass(c,Ct.CLASS_CONTROLLER_ROW),r instanceof ft?rt.addClass(c,"color"):rt.addClass(c,Ye(r.getValue())),function(e,t,n){if(n.__li=t,n.__gui=e,Be.extend(n,{options:function(t){if(arguments.length>1){var o=n.__li.nextElementSibling;return n.remove(),It(e,n.object,n.property,{before:o,factoryArgs:[Be.toArray(arguments)]})}if(Be.isArray(t)||Be.isObject(t)){var r=n.__li.nextElementSibling;return n.remove(),It(e,n.object,n.property,{before:r,factoryArgs:[t]})}},name:function(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function(){return n.__gui.listen(n),n},remove:function(){return n.__gui.remove(n),n}}),n instanceof dt){var o=new lt(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});Be.each(["updateDisplay","onChange","onFinishChange","step","min","max"],(function(e){var t=n[e],r=o[e];n[e]=o[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(o,e),t.apply(n,e)}})),rt.addClass(t,"has-slider"),n.domElement.insertBefore(o.domElement,n.domElement.firstElementChild)}else if(n instanceof lt){var r=function(t){if(Be.isNumber(n.__min)&&Be.isNumber(n.__max)){var o=n.__li.firstElementChild.firstElementChild.innerHTML,r=n.__gui.__listening.indexOf(n)>-1;n.remove();var i=It(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return i.name(o),r&&i.listen(),i}return t};n.min=Be.compose(r,n.min),n.max=Be.compose(r,n.max)}else n instanceof it?(rt.bind(t,"click",(function(){rt.fakeEvent(n.__checkbox,"click")})),rt.bind(n.__checkbox,"click",(function(e){e.stopPropagation()}))):n instanceof _t?(rt.bind(t,"click",(function(){rt.fakeEvent(n.__button,"click")})),rt.bind(t,"mouseover",(function(){rt.addClass(n.__button,"hover")})),rt.bind(t,"mouseout",(function(){rt.removeClass(n.__button,"hover")}))):n instanceof ft&&(rt.addClass(t,"color"),n.updateDisplay=Be.compose((function(e){return t.style.borderLeftColor=n.__color.toString(),e}),n.updateDisplay),n.updateDisplay());n.setValue=Be.compose((function(t){return e.getRoot().__preset_select&&n.isModified()&&Lt(e.getRoot(),!0),t}),n.setValue)}(e,c,r),e.__controllers.push(r),r}function Ot(e,t){return document.location.href+"."+t}function Pt(e,t,n){var o=document.createElement("option");o.innerHTML=t,o.value=t,e.__preset_select.appendChild(o),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function Ft(e,t){t.style.display=e.useLocalStorage?"block":"none"}function Ut(e){var t=void 0;function n(n){return n.preventDefault(),e.width+=t-n.clientX,e.onResize(),t=n.clientX,!1}function o(){rt.removeClass(e.__closeButton,Ct.CLASS_DRAG),rt.unbind(window,"mousemove",n),rt.unbind(window,"mouseup",o)}function r(r){return r.preventDefault(),t=r.clientX,rt.addClass(e.__closeButton,Ct.CLASS_DRAG),rt.bind(window,"mousemove",n),rt.bind(window,"mouseup",o),!1}e.__resize_handle=document.createElement("div"),Be.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),rt.bind(e.__resize_handle,"mousedown",r),rt.bind(e.__closeButton,"mousedown",r),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function Dt(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function Bt(e,t){var n={};return Be.each(e.__rememberedObjects,(function(o,r){var i={},s=e.__rememberedObjectIndecesToControllers[r];Be.each(s,(function(e,n){i[n]=t?e.initialValue:e.getValue()})),n[r]=i})),n}function zt(e){0!==e.length&&vt.call(window,(function(){zt(e)})),Be.each(e,(function(e){e.updateDisplay()}))}Ct.toggleHide=function(){Rt=!Rt,Be.each(Mt,(function(e){e.domElement.style.display=Rt?"none":""}))},Ct.CLASS_AUTO_PLACE="a",Ct.CLASS_AUTO_PLACE_CONTAINER="ac",Ct.CLASS_MAIN="main",Ct.CLASS_CONTROLLER_ROW="cr",Ct.CLASS_TOO_TALL="taller-than-window",Ct.CLASS_CLOSED="closed",Ct.CLASS_CLOSE_BUTTON="close-button",Ct.CLASS_CLOSE_TOP="close-top",Ct.CLASS_CLOSE_BOTTOM="close-bottom",Ct.CLASS_DRAG="drag",Ct.DEFAULT_WIDTH=245,Ct.TEXT_CLOSED="Close Controls",Ct.TEXT_OPEN="Open Controls",Ct._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||Ct.toggleHide()},rt.bind(window,"keydown",Ct._keydownHandler,!1),Be.extend(Ct.prototype,{add:function(e,t){return It(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return It(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;Be.defer((function(){t.onResize()}))},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&yt.removeChild(this.domElement);var e=this;Be.each(this.__folders,(function(t){e.removeFolder(t)})),rt.unbind(window,"keydown",Ct._keydownHandler,!1),wt(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new Ct(t);this.__folders[e]=n;var o=St(this,n.domElement);return rt.addClass(o,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],wt(e);var t=this;Be.each(e.__folders,(function(t){e.removeFolder(t)})),Be.defer((function(){t.onResize()}))},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=rt.getOffset(e.__ul).top,n=0;Be.each(e.__ul.childNodes,(function(t){e.autoPlace&&t===e.__save_row||(n+=rt.getHeight(t))})),window.innerHeight-t-20<n?(rt.addClass(e.domElement,Ct.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(rt.removeClass(e.domElement,Ct.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&Be.defer((function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"})),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:Be.debounce((function(){this.onResize()}),50),remember:function(){if(Be.isUndefined(bt)&&((bt=new gt).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;Be.each(Array.prototype.slice.call(arguments),(function(t){0===e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement("li");rt.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),rt.addClass(t,"save-row");var n=document.createElement("span");n.innerHTML="&nbsp;",rt.addClass(n,"button gears");var o=document.createElement("span");o.innerHTML="Save",rt.addClass(o,"button"),rt.addClass(o,"save");var r=document.createElement("span");r.innerHTML="New",rt.addClass(r,"button"),rt.addClass(r,"save-as");var i=document.createElement("span");i.innerHTML="Revert",rt.addClass(i,"button"),rt.addClass(i,"revert");var s=e.__preset_select=document.createElement("select");if(e.load&&e.load.remembered?Be.each(e.load.remembered,(function(t,n){Pt(e,n,n===e.preset)})):Pt(e,xt,!1),rt.bind(s,"change",(function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value})),t.appendChild(s),t.appendChild(n),t.appendChild(o),t.appendChild(r),t.appendChild(i),Tt){var a=document.getElementById("dg-local-explain"),c=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(Ot(0,"isLocal"))&&c.setAttribute("checked","checked"),Ft(e,a),rt.bind(c,"change",(function(){e.useLocalStorage=!e.useLocalStorage,Ft(e,a)}))}var u=document.getElementById("dg-new-constructor");rt.bind(u,"keydown",(function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||bt.hide()})),rt.bind(n,"click",(function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),bt.show(),u.focus(),u.select()})),rt.bind(o,"click",(function(){e.save()})),rt.bind(r,"click",(function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)})),rt.bind(i,"click",(function(){e.revert()}))}(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)})),this.autoPlace&&Dt(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=Bt(this)),e.folders={},Be.each(this.__folders,(function(t,n){e.folders[n]=t.getSaveObject()})),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=Bt(this),Lt(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[xt]=Bt(this,!0)),this.load.remembered[e]=Bt(this),this.preset=e,Pt(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){Be.each(this.__controllers,(function(t){this.getRoot().load.remembered?Nt(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())}),this),Be.each(this.__folders,(function(e){e.revert(e)})),e||Lt(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&zt(this.__listening)},updateDisplay:function(){Be.each(this.__controllers,(function(e){e.updateDisplay()})),Be.each(this.__folders,(function(e){e.updateDisplay()}))}});var Vt=Ct;const Gt=e=>{const{refresh:t,reload:n}=we,o={save:()=>{((e,t="data",n=!0)=>{var o=(e=>{for(var t=[],n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return new Uint8Array(t)})(n?JSON.stringify(e,null,4):JSON.stringify(e)),r=new Blob([o],{type:"application/octet-stream"}),i=URL.createObjectURL(r),s=document.createElement("a");s.setAttribute("href",i),s.setAttribute("download",`${t}.json`);var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(a)})(Te,"Settings")}},r=new Vt({width:200});window.gui=r;const i=r.addFolder("System");i.add(Te,"lockCamera").onFinishChange(t),i.add(we,"reload").name("RESTART"),i.add(o,"save").name("Save Settings"),i.add(we,"reset").name("Reset Default"),i.open();const s=r.addFolder("Basic");s.add(Te,"posX",-10,10,.01).onFinishChange(t),s.add(Te,"posY",-10,10,.01).onFinishChange(t);const a=r.addFolder("Particles");a.add(Te,"numParticles",[128,256,300,400,500,600,650,700,750,800,850,900,950,1e3]).onFinishChange(n),a.add(Te,"flowSpeed",.1,4,.01).onFinishChange(t),a.add(Te,"particleSize",.1,10,.01).onFinishChange(t),a.add(Te,"acc_X",-5,5,.01).onFinishChange(t),a.add(Te,"acc_Y",-5,5,.01).onFinishChange(t),a.add(Te,"noiseScale",.1,2,.01).onFinishChange(t),a.add(Te,"noiseStrength",0,4,.01).onFinishChange(t);const c=r.addFolder("Colors");c.add(Te,"brightness",.1,5,.01).onFinishChange(t),c.addColor(Te,"color1").onFinishChange(t),c.addColor(Te,"color2").onFinishChange(t),c.addColor(Te,"color3").onFinishChange(t),c.addColor(Te,"color4").onFinishChange(t),c.addColor(Te,"color5").onFinishChange(t),c.add(Te,"colorEdge1",0,1,.01).onFinishChange(t),c.add(Te,"colorEdge2",0,1,.01).onFinishChange(t),c.add(Te,"colorEdge3",0,1,.01).onFinishChange(t),c.add(Te,"colorEdge4",0,1,.01).onFinishChange(t);const u=r.addFolder("Interaction");u.add(Te,"mouseRadius",.1,5,.01).onFinishChange(t),u.add(Te,"mouseForce",.1,5,.01).onFinishChange(t);const l=r.addFolder("Add Color");l.add(Te,"minVolume",0,3,.01).onFinishChange(t),l.add(Te,"maxVolume",0,3,.01).onFinishChange(t),l.add(Te,"strength",0,4,.01).onFinishChange(t),l.add(Te,"randomLevel",0,1,.01).onFinishChange(t),l.addColor(Te,"colorL").onFinishChange(t),l.addColor(Te,"colorR").onFinishChange(t),l.add(Te,"new_Pscale",1,4,.01).onFinishChange(t)};let Xt,Ht;var kt;(kt="",new Promise(((e,t)=>{const n=document.body.querySelector(".Loading-Bar"),o=Le.map((({id:e,url:t,type:n})=>({id:e,url:kt+t,type:n})));Le.length>0?(document.body.classList.add("isLoading"),new(Ie())({assets:o}).on("error",(e=>{console.log("Error :",e)})).on("progress",(e=>{n&&(n.style.width=100*e+"%")})).on("complete",(t=>{n&&(n.style.width="100%"),Ee.init(t),setTimeout((()=>{document.body.classList.remove("isLoading"),e()}),500)})).start()):e()}))).then((function(){we.init(),Ht=document.createElement("canvas"),Ht.id="main-canvas",document.body.appendChild(Ht),E.init(Ht,{alpha:!1,preserveDrawingBuffer:!0}),Xt=new Ae,Gt()}),(e=>{console.error(e)}))})()})();